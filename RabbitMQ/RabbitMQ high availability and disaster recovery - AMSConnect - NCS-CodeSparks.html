<!DOCTYPE html>
<!-- saved from url=(0108)https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
                            <title>RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks</title>
    
        

                        
    
                        
    

                
    
    <meta http-equiv="X-UA-Compatible" content="IE=EDGE,chrome=IE7">

<meta id="confluence-context-path" name="confluence-context-path" content="/confluence">
<meta id="confluence-base-url" name="confluence-base-url" content="https://codesparks.ncs.com.sg/confluence">

    <meta id="atlassian-token" name="atlassian-token" content="5788c939bf897bbf8a9b8d61ba8b96e7c74ea5c8">


<meta id="confluence-space-key" name="confluence-space-key" content="AMSConnect">
<script type="text/javascript">
        var contextPath = '/confluence';
</script>

    

    <meta name="confluence-request-time" content="1629709309890">
        
    
        
            <meta name="ajs-show-space-welcome-dialog" content="true">
            <style>.ia-fixed-sidebar, .ia-splitter-left {width: 285px;}.theme-default .ia-splitter #main {margin-left: 285px;}.ia-fixed-sidebar {visibility: hidden;}</style>
            <meta name="ajs-use-keyboard-shortcuts" content="true">
            <meta name="ajs-discovered-plugin-features" content="{&quot;com.atlassian.confluence.plugins.confluence-dashboard&quot;:[&quot;dialog&quot;,&quot;tips&quot;],&quot;com.atlassian.confluence.plugins.confluence-hipchat-integration-plugin&quot;:[&quot;hipChatServerIntegration&quot;],&quot;com.atlassian.confluence.plugins.confluence-page-banner&quot;:[&quot;recently-work-on-contributor-lozenge&quot;],&quot;com.atlassian.confluence.plugins.confluence-jira-metadata&quot;:[&quot;linked-issues-dropdown&quot;]}">
            <meta name="ajs-keyboardshortcut-hash" content="3f6db2ec514a8850ea72fb2fb0086a72">
            <meta name="ajs-is-confluence-admin" content="false">
            <meta name="ajs-connection-timeout" content="10000">
            
    
    
            <meta name="ajs-page-title" content="RabbitMQ high availability and disaster recovery">
            <meta name="ajs-latest-published-page-title" content="RabbitMQ high availability and disaster recovery">
            <meta name="ajs-space-name" content="AMSConnect">
            <meta name="ajs-page-id" content="187236375">
            <meta name="ajs-latest-page-id" content="187236375">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-parent-page-title" content="How-to articles">
            <meta name="ajs-parent-page-id" content="134251625">
            <meta name="ajs-space-key" content="AMSConnect">
            <meta name="ajs-max-number-editors" content="12">
            <meta name="ajs-macro-placeholder-timeout" content="5000">
            <meta name="ajs-jira-metadata-count" content="-1">
            <meta name="ajs-from-page-title" content="">
            <meta name="ajs-can-remove-page" content="true">
            <meta name="ajs-can-remove-page-hierarchy" content="true">
            <meta name="ajs-browse-page-tree-mode" content="view">
            <meta name="ajs-shared-drafts" content="true">
            <meta name="ajs-user-display-name" content="Sun Yu Chen  (NCS)">
            <meta name="ajs-context-path" content="/confluence">
            <meta name="ajs-base-url" content="https://codesparks.ncs.com.sg/confluence">
            <meta name="ajs-version-number" content="7.4.1">
            <meta name="ajs-build-number" content="8401">
            <meta name="ajs-remote-user" content="yuchensun">
            <meta name="ajs-remote-user-key" content="402804af4fe487c80150036fdfe3000c">
            <meta name="ajs-remote-user-has-licensed-access" content="true">
            <meta name="ajs-remote-user-has-browse-users-permission" content="true">
            <meta name="ajs-current-user-fullname" content="Sun Yu Chen  (NCS)">
            <meta name="ajs-current-user-avatar-url" content="/images/icons/profilepics/default.svg">
            <meta name="ajs-current-user-avatar-uri-reference" content="/confluence/images/icons/profilepics/default.svg">
            <meta name="ajs-static-resource-url-prefix" content="/confluence/s/ab8opv/8401/758836457240a7983be3b3db3463da30107b780e/_">
            <meta name="ajs-global-settings-attachment-max-size" content="10485760">
            <meta name="ajs-global-settings-quick-search-enabled" content="true">
            <meta name="ajs-user-locale" content="en_US">
            <meta name="ajs-enabled-dark-features" content="site-wide.shared-drafts,site-wide.synchrony,clc.quick.create,confluence.view.edit.transition,cql.search.screen,confluence-inline-comments-resolved,frontend.editor.v4,http.session.registrar,nps.survey.inline.dialog,confluence.efi.onboarding.new.templates,frontend.editor.v4.compatibility,atlassian.cdn.static.assets,pdf-preview,previews.sharing,previews.versions,file-annotations,confluence.efi.onboarding.rich.space.content,collaborative-audit-log,previews.conversion-service,editor.ajax.save,read.only.mode,graphql,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentReplyEvent,previews.trigger-all-file-types,notification.plugin.api.enabled.com.atlassian.confluence.plugins.inlinecomments.events.InlineCommentCreateEvent,attachment.extracted.text.extractor,lucene.caching.filter,confluence.table.resizable,notification.batch,previews.sharing.pushstate,confluence-inline-comments-rich-editor,site-wide.synchrony.opt-in,file-annotations.likes,gatekeeper-ui-v2,v2.content.name.searcher,mobile.supported.version,pulp,confluence-inline-comments,confluence-inline-comments-dangling-comment,quick-reload-inline-comments-flags">
            <meta name="ajs-atl-token" content="5788c939bf897bbf8a9b8d61ba8b96e7c74ea5c8">
            <meta name="ajs-confluence-flavour" content="VANILLA">
            <meta name="ajs-user-date-pattern" content="dd MMM yyyy">
            <meta name="ajs-access-mode" content="READ_WRITE">
            <meta name="ajs-render-mode" content="READ_WRITE">
            <meta name="ajs-date.format" content="MMM dd, yyyy">
    
    <link rel="shortcut icon" href="https://codesparks.ncs.com.sg/confluence/s/ab8opv/8401/758836457240a7983be3b3db3463da30107b780e/33/_/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://codesparks.ncs.com.sg/confluence/s/ab8opv/8401/758836457240a7983be3b3db3463da30107b780e/33/_/favicon.ico">

<link rel="search" type="application/opensearchdescription+xml" href="https://codesparks.ncs.com.sg/confluence/opensearch/osd.action" title="NCS-CodeSparks">
    
                    
            <meta name="ajs-create-issue-metadata-show-discovery" content="true">
            

    <script>
window.WRM=window.WRM||{};window.WRM._unparsedData=window.WRM._unparsedData||{};window.WRM._unparsedErrors=window.WRM._unparsedErrors||{};
WRM._unparsedData["com.atlassian.plugins.atlassian-plugins-webresource-plugin:context-path.context-path"]="\u0022\u005C/confluence\u0022";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-feature-discovery-plugin:confluence-feature-discovery-plugin-resources.test-mode"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:policy-update-init.policy-update-data-provider"]="false";
WRM._unparsedData["com.atlassian.analytics.analytics-client:programmatic-analytics-init.programmatic-analytics-data-provider"]="false";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.applinks-help-paths"]="{\u0022entries\u0022:{\u0022applinks.docs.root\u0022:\u0022https://confluence.atlassian.com/display/APPLINKS-060/\u0022,\u0022applinks.docs.diagnostics.troubleshoot.sslunmatched\u0022:\u0022SSL+and+application+link+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthsignatureinvalid\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthtimestamprefused\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.delete.entity.link\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.adding.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.administration.guide\u0022:\u0022Application+Links+Documentation\u0022,\u0022applinks.docs.oauth.security\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.troubleshoot.application.links\u0022:\u0022Troubleshoot+application+links\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unknownerror\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.trusted.apps\u0022:\u0022Configuring+Trusted+Applications+authentication+for+an+application+link\u0022,\u0022applinks.docs.diagnostics.troubleshoot.authlevelunsupported\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.ssluntrusted\u0022:\u0022SSL+and+application+link+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unknownhost\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.delete.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.link.applications\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.diagnostics.troubleshoot.oauthproblem\u0022:\u0022OAuth+troubleshooting+guide\u0022,\u0022applinks.docs.diagnostics.troubleshoot.migration\u0022:\u0022Update+application+links+to+use+OAuth\u0022,\u0022applinks.docs.relocate.application.link\u0022:\u0022Link+Atlassian+applications+to+work+together\u0022,\u0022applinks.docs.administering.entity.links\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.upgrade.application.link\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.diagnostics.troubleshoot.connectionrefused\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.oauth\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.insufficient.remote.permission\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.configuring.application.link.auth\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.diagnostics\u0022:\u0022Application+links+diagnostics\u0022,\u0022applinks.docs.configured.authentication.types\u0022:\u0022OAuth+security+for+application+links\u0022,\u0022applinks.docs.adding.entity.link\u0022:\u0022Create+links+between+projects\u0022,\u0022applinks.docs.diagnostics.troubleshoot.unexpectedresponse\u0022:\u0022Network+and+connectivity+troubleshooting+guide\u0022,\u0022applinks.docs.configuring.auth.basic\u0022:\u0022Configuring+Basic+HTTP+Authentication+for+an+Application+Link\u0022,\u0022applinks.docs.diagnostics.troubleshoot.authlevelmismatch\u0022:\u0022OAuth+troubleshooting+guide\u0022}}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.applinks-types"]="{\u0022crowd\u0022:\u0022Crowd\u0022,\u0022confluence\u0022:\u0022Confluence\u0022,\u0022fecru\u0022:\u0022FishEye / Crucible\u0022,\u0022stash\u0022:\u0022Bitbucket Server\u0022,\u0022jira\u0022:\u0022Jira\u0022,\u0022refapp\u0022:\u0022Reference Application\u0022,\u0022bamboo\u0022:\u0022Bamboo\u0022,\u0022generic\u0022:\u0022Generic Application\u0022}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.entity-types"]="{\u0022singular\u0022:{\u0022refapp.charlie\u0022:\u0022Charlie\u0022,\u0022fecru.project\u0022:\u0022Crucible Project\u0022,\u0022fecru.repository\u0022:\u0022FishEye Repository\u0022,\u0022stash.project\u0022:\u0022Bitbucket Server Project\u0022,\u0022generic.entity\u0022:\u0022Generic Project\u0022,\u0022confluence.space\u0022:\u0022Confluence Space\u0022,\u0022bamboo.project\u0022:\u0022Bamboo Project\u0022,\u0022jira.project\u0022:\u0022Jira Project\u0022},\u0022plural\u0022:{\u0022refapp.charlie\u0022:\u0022Charlies\u0022,\u0022fecru.project\u0022:\u0022Crucible Projects\u0022,\u0022fecru.repository\u0022:\u0022FishEye Repositories\u0022,\u0022stash.project\u0022:\u0022Bitbucket Server Projects\u0022,\u0022generic.entity\u0022:\u0022Generic Projects\u0022,\u0022confluence.space\u0022:\u0022Confluence Spaces\u0022,\u0022bamboo.project\u0022:\u0022Bamboo Projects\u0022,\u0022jira.project\u0022:\u0022Jira Projects\u0022}}";
WRM._unparsedData["com.atlassian.applinks.applinks-plugin:applinks-common-exported.authentication-types"]="{\u0022com.atlassian.applinks.api.auth.types.BasicAuthenticationProvider\u0022:\u0022Basic Access\u0022,\u0022com.atlassian.applinks.api.auth.types.TrustedAppsAuthenticationProvider\u0022:\u0022Trusted Applications\u0022,\u0022com.atlassian.applinks.api.auth.types.CorsAuthenticationProvider\u0022:\u0022CORS\u0022,\u0022com.atlassian.applinks.api.auth.types.OAuthAuthenticationProvider\u0022:\u0022OAuth\u0022,\u0022com.atlassian.applinks.api.auth.types.TwoLeggedOAuthAuthenticationProvider\u0022:\u0022OAuth\u0022,\u0022com.atlassian.applinks.api.auth.types.TwoLeggedOAuthWithImpersonationAuthenticationProvider\u0022:\u0022OAuth\u0022}";
WRM._unparsedData["com.atlassian.confluence.plugins.synchrony-interop:synchrony-status-banner-loader.synchrony-status"]="false";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-license-banner:confluence-license-banner-resources.license-details"]="{\u0022daysBeforeLicenseExpiry\u0022:0,\u0022daysBeforeMaintenanceExpiry\u0022:0,\u0022showLicenseExpiryBanner\u0022:false,\u0022showMaintenanceExpiryBanner\u0022:false,\u0022renewUrl\u0022:null,\u0022salesUrl\u0022:null}";
WRM._unparsedData["com.atlassian.confluence.plugins.confluence-search-ui-plugin:confluence-search-ui-plugin-resources.i18n-data"]="{\u0022search.ui.recent.link.text\u0022:\u0022View more recently visited\u0022,\u0022search.ui.filter.space.category.input.label\u0022:\u0022Find space categories...\u0022,\u0022search.ui.search.results.empty\u0022:\u0022We couldn\u005Cu0027\u005Cu0027t find anything matching \u005C\u0022{0}\u005C\u0022.\u0022,\u0022search.ui.filter.clear.selected\u0022:\u0022Clear selected items\u0022,\u0022search.ui.content.name.search.items.panel.load.all.top.items.button.text\u0022:\u0022Show more app results...\u0022,\u0022search.ui.filter.space.archive.label\u0022:\u0022Search archived spaces\u0022,\u0022search.ui.filter.label\u0022:\u0022filter\u0022,\u0022search.ui.filter.contributor.button.text\u0022:\u0022Contributor\u0022,\u0022search.ui.filter.date.all.text\u0022:\u0022Any time\u0022,\u0022search.ui.filter.space.current.label\u0022:\u0022CURRENT\u0022,\u0022search.ui.clear.input.button.text\u0022:\u0022Clear text\u0022,\u0022search.ui.search.results.clear.button\u0022:\u0022clear your filters.\u0022,\u0022search.ui.filter.date.hour.text\u0022:\u0022The past day\u0022,\u0022help.search.ui.link.title\u0022:\u0022Search tips\u0022,\u0022search.ui.filters.heading\u0022:\u0022Filter by\u0022,\u0022search.ui.filter.label.input.label\u0022:\u0022Find labels...\u0022,\u0022search.ui.recent.items.anonymous\u0022:\u0022Start exploring. Your search results will appear here.\u0022,\u0022search.ui.filter.date.month.text\u0022:\u0022The past month\u0022,\u0022search.ui.input.label\u0022:\u0022Search\u0022,\u0022search.ui.search.result\u0022:\u0022{0,choice,1#{0} search result|1\u005Cu003c{0} search results}\u0022,\u0022search.ui.infinite.scroll.button.text\u0022:\u0022More results\u0022,\u0022search.ui.filter.date.button.text\u0022:\u0022Date\u0022,\u0022search.ui.filter.date.week.text\u0022:\u0022The past week\u0022,\u0022search.ui.filter.label.button.text\u0022:\u0022Label\u0022,\u0022search.ui.input.alert\u0022:\u0022Hit enter to search\u0022,\u0022search.ui.result.subtitle.calendar\u0022:\u0022Team calendar\u0022,\u0022search.ui.filter.no.result.text\u0022:\u0022We can\u005Cu0027\u005Cu0027t find anything matching your search\u0022,\u0022search.ui.filter.date.heading\u0022:\u0022Last modified within\u0022,\u0022search.ui.result.subtitle.user\u0022:\u0022User profile\u0022,\u0022search.ui.filter.contributor.input.label\u0022:\u0022Find people...\u0022,\u0022search.ui.filter.content.type.button.text\u0022:\u0022Type\u0022,\u0022search.ui.filter.space.input.label\u0022:\u0022Find spaces...\u0022,\u0022search.ui.filter.date.year.text\u0022:\u0022The past year\u0022,\u0022search.ui.advanced.search.link.text\u0022:\u0022Advanced search\u0022,\u0022search.ui.filter.space.button.text\u0022:\u0022Space\u0022,\u0022search.ui.generic.error\u0022:\u0022Something went wrong. Refresh the page, or contact your admin if this keeps happening.\u0022,\u0022search.ui.recent.spaces\u0022:\u0022Recent Spaces\u0022,\u0022search.ui.search.results.clear.line2\u0022:\u0022Try a different search term or\u0022,\u0022search.ui.filter.space.category.button.text\u0022:\u0022Space category\u0022,\u0022search.ui.search.results.clear.line1\u0022:\u0022We couldn\u005Cu0027\u005Cu0027t find anything matching your search.\u0022,\u0022search.ui.content.name.search.items.panel.load.all.top.items.admin.button.text\u0022:\u0022Show more settings and app results...\u0022,\u0022search.ui.recent.pages\u0022:\u0022Recently visited\u0022,\u0022search.ui.search.result.anonymous\u0022:\u0022{0,choice,1#{0} search result|1\u005Cu003c{0} search results}. Have an account? {1}Log in{2} to expand your search.\u0022,\u0022search.ui.recent.items.empty\u0022:\u0022Start exploring. Pages and spaces you\u005Cu0027\u005Cu0027ve visited recently will appear here.\u0022,\u0022search.ui.result.subtitle.space\u0022:\u0022Space\u0022,\u0022search.ui.filter.space.init.heading\u0022:\u0022recent spaces\u0022}";
if(window.WRM._dataArrived)window.WRM._dataArrived();</script>
<link type="text/css" rel="stylesheet" href="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch.css" data-wrm-key="_super" data-wrm-batch-type="context" media="all">
<link type="text/css" rel="stylesheet" href="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch(1).css" data-wrm-key="atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments,-_super" data-wrm-batch-type="context" media="all">
<script type="text/javascript" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch.js.download" data-wrm-key="_super" data-wrm-batch-type="context" data-initially-rendered=""></script>
<script type="text/javascript" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch.js(1).download" data-wrm-key="atl.confluence.plugins.pagetree-desktop,main,viewcontent,atl.general,page,atl.comments,-_super" data-wrm-batch-type="context" data-initially-rendered=""></script>

    

        
    

        
        <meta name="ajs-site-title" content="NCS-CodeSparks">
            
    

    
                <link rel="canonical" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery">
        <link rel="shortlink" href="https://codesparks.ncs.com.sg/confluence/x/FwApCw">
    <meta name="wikilink" content="[AMSConnect:RabbitMQ high availability and disaster recovery]">
    <meta name="page-version" content="110">
    <meta name="ajs-page-version" content="110">

<script type="text/javascript" charset="utf-8" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch.js(2).download"></script><link rel="stylesheet" type="text/css" href="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch(2).css"><link rel="stylesheet" type="text/css" href="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch(3).css"><link rel="stylesheet" type="text/css" href="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/com.atlassian.confluence.ext.newcode-macro-plugin_sh-theme-confluence.css"><script type="text/javascript" charset="utf-8" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch.js(3).download"></script><script type="text/javascript" charset="utf-8" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch.js(4).download"></script><script type="text/javascript" charset="utf-8" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch.js(5).download"></script>
            <meta name="ajs-use-watch" content="false">
            <meta name="ajs-attachment-source-content-id" content="187236375">
            <meta name="ajs-use-inline-tasks" content="true">
            <meta name="ajs-heartbeat" content="true">
            <meta name="ajs-action-locale" content="en_US">
            <meta name="ajs-editor-plugin-resource-prefix" content="/confluence/s/ab8opv/8401/758836457240a7983be3b3db3463da30107b780e/7.4.1/_">
            <meta name="ajs-edit-mode" content="collaborative">
            <meta name="ajs-user-watching-own-content" content="true">
            <meta name="ajs-new-page" content="false">
            <meta name="ajs-editor-mode" content="richtext">
            <meta name="ajs-auto-start" content="false">
            <meta name="ajs-conf-revision" content="confluence$content$187236375.240">
            <meta name="ajs-sync-revision-source" content="synchrony-ack">
            <meta name="ajs-draft-id" content="187236377">
            <meta name="ajs-draft-share-id" content="f2399eae-b049-41a6-b83a-bc663305e2dd">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-collaborative-editor-status" content="">
            <meta name="ajs-existing-draft-id" content="0">
            <meta name="ajs-content-id" content="187236375">
            <meta name="ajs-form-name" content="inlinecommentform">
            <meta name="ajs-can-attach-files" content="true">
            <meta name="ajs-show-draft-message" content="false">
            <meta name="ajs-shared-drafts" content="true">
            <meta name="ajs-collaborative-content" content="true">
            <meta name="ajs-min-editor-height" content="150">
            <meta name="ajs-version-comment" content="">
            <meta name="ajs-draft-type" content="page">
                
                <meta name="ajs-synchrony-token" content="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJodHRwczpcL1wvY29kZXNwYXJrcy5uY3MuY29tLnNnXC9zeW5jaHJvbnlcL3YxIiwic3ViIjoiNDAyODA0YWY0ZmU0ODdjODAxNTAwMzZmZGZlMzAwMGMiLCJhY2Nlc3MiOnsiXC9kYXRhXC9TeW5jaHJvbnktOWNkODRkNmYtZGEwNC0zNzVkLWE4NWQtOGViMTY3ZWJhMjc2XC9jb25mbHVlbmNlLTE4NzIzNjM3NS10aXRsZSI6ImZ1bGwiLCJcL2RhdGFcL1N5bmNocm9ueS05Y2Q4NGQ2Zi1kYTA0LTM3NWQtYTg1ZC04ZWIxNjdlYmEyNzZcL2NvbmZsdWVuY2UtMTg3MjM2Mzc1IjoiZnVsbCJ9LCJyZXZpc2lvbk1ldGEiOnsidXNlcktleSI6IjQwMjgwNGFmNGZlNDg3YzgwMTUwMDM2ZmRmZTMwMDBjIn0sInNlc3Npb24iOnsiYXZhdGFyVVJMIjoiXC9pbWFnZXNcL2ljb25zXC9wcm9maWxlcGljc1wvZGVmYXVsdC5zdmciLCJuYW1lIjoieXVjaGVuc3VuIiwiZnVsbG5hbWUiOiJTdW4gWXUgQ2hlbiAgKE5DUykifSwiaXNzIjoiU3luY2hyb255LTljZDg0ZDZmLWRhMDQtMzc1ZC1hODVkLThlYjE2N2ViYTI3NiIsImV4cCI6MTYyOTc5NTcxOCwiaWF0IjoxNjI5NzA5MzE4fQ.hPJ-BfwZep66W-FTAes1PaVAsJZ5sX2jcFz0wyHrs3o">
    <meta name="ajs-synchrony-base-url" content="https://codesparks.ncs.com.sg/synchrony,https://codesparks.ncs.com.sg/confluence/synchrony-proxy">
    <meta name="ajs-synchrony-app-id" content="Synchrony-9cd84d6f-da04-375d-a85d-8eb167eba276">
    <meta name="ajs-synchrony-expiry" content="1629794818">
    <meta name="ajs-use-xhr-fallback" content="false">

            		    <meta name="ajs-max-thumb-width" content="300">
		    <meta name="ajs-max-thumb-height" content="300">
		    <meta name="ajs-can-send-email" content="true">
		    <meta name="ajs-is-dev-mode" content="false">
		    <meta name="ajs-draft-save-interval" content="30000">
		    <meta name="ajs-show-hidden-user-macros" content="false">
		    <meta name="ajs-can-view-profile" content="true">
		    <meta name="ajs-is-admin" content="false">
		    <meta name="ajs-confluence.prefs.editor.disable.autocomplete" content="false">
		    <meta name="ajs-confluence.prefs.editor.disable.autoformat" content="false">
		    <meta name="ajs-heartbeat-interval" content="30000">
	
    <link rel="stylesheet" type="text/css" href="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch(4).css"><script type="text/javascript" charset="utf-8" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/batch.js(6).download"></script><style type="text/css">#property-panel a.macro-placeholder-property-panel-display-newline-button span.icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAvklEQVR42rVTPQuFIBT1p1t7e2EFDrXnVmNb4Ca4BS5BW9AfOA+F+wjfAwfpwuHcDzn3olcGIAv5An3fo+u6L55x27bE5P+cZdkWqVJH6pDMsWxTSsFjmqbAMZIC4zjivm9c14XjOLDvO4wx2LYNwzCkBZqmwXmecM7BWgutNdZ1xTzP8LWkQFVVWJYFUspwQUII1HUd2NeSApxzeJRlCfKLovBxYPa6xe9KsedHLc7TXryzidQpnurvZNm/8QMbqb4yyqv4rAAAAABJRU5ErkJggg==);width:16px;height:16px;display:inline-block}#property-panel a.macro-placeholder-property-panel-display-inline-button span.icon{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAw0lEQVR42q1TMQqAMBDr0/UBroJiBUEf0E51dRMcxUlwFBcHPxA5IUuLONSDcDmupO01VQCiEC+gtYagrusH5FVVCfdz0FfRQVVR5CmoLtzfnWBf/R7WWhhjIFnAmvlToOs6XNeF8zyx7zvWdcU8zxjHEW3bhgK8NydaFAWO48C2bViWBdM0YRgGOOcgPc7t9RWyLEPf92ia5hEuyxJ5nj+Lpae+IkkSpGkKZnLW6u/gDHzX+c6kP4j/nfjmNJ8HiP6NN81gzxU6QYojAAAAAElFTkSuQmCC);width:16px;height:16px;display:inline-block}#property-panel a.macro-placeholder-property-panel-display-inline-button,#property-panel a.macro-placeholder-property-panel-display-newline-button{padding:0 6px}</style><style type="text/css">#charmap-picker{border:0;font-size:16px;font-family:Arial,Helvetica,FreeSans,sans-serif;padding:2px;text-align:center}#charmap-view{padding-right:1em;text-align:left;vertical-align:top}#charmap-info{text-align:center;vertical-align:top;width:100%}#charmap-info>table{border:0;height:100px;padding:0;width:100%}#code-value{font-size:3em}#code-name{font-size:13px}#code-name,#code-value{color:#666;text-align:center}.charmap a:active,.charmap a:hover,.charmap a:link,.charmap a:visited{color:#326ca6;text-decoration:none}</style><style type="text/css">body.ios{min-height:150px}</style><style type="text/css">table.draggable{margin-left:-10px;margin-top:-10px}table.draggable:hover>tbody>tr>td.draggable-column,table.draggable:hover>tbody>tr>td.draggable-row,table.draggable:hover>tbody>tr>td.draggable-table{background-color:#777;border-top:1px solid #777;border-left:1px solid #777}table.draggable:hover>tbody>tr>td.draggable-column,table.draggable:hover>tbody>tr>td.draggable-table{border-right:1px solid #aaa}table.draggable:hover>tbody>tr>td.draggable-row,table.draggable:hover>tbody>tr>td.draggable-table{border-bottom:1px solid #aaa}td.draggable-column,td.draggable-row,td.draggable-table{background-color:transparent;border-top:1px solid transparent;border-left:1px solid transparent;cursor:move}td.draggable-column,td.draggable-table{border-right:1px solid transparent}td.draggable-row,td.draggable-table{border-bottom:1px solid transparent}td.draggable-column{height:10px}td.draggable-row{width:10px}.wiki-content img.confluence-embedded-image,.wiki-content img.editor-inline-macro,.wiki-content table.wysiwyg-macro{cursor:move}.wiki-content table.wysiwyg-macro>tbody>tr>td.wysiwyg-macro-body{cursor:text}#move-indicator{font-weight:400!important}</style><style type="text/css">.quick-comment-form #rte-toolbar .insert-files.toolbar-item{padding:0 6px}.quick-comment-form #rte-toolbar .insert-files .toolbar-trigger{margin:0 -6px}#rte-toolbar .insert-files.toolbar-item{padding:0}#rte-toolbar .insert-files .trigger-text{display:none}#rte-toolbar .insert-files .aui-button{padding:0 6px}</style><style type="text/css">.aui-dialog .wiki-parser-selector{font-size:14px;margin-right:5px}.insert-wiki-markup-panel div,.insert-wiki-markup-panel div form{height:100%;text-align:center}.insert-wiki-markup-panel .spinner{position:absolute;top:50%;left:50%;margin-top:-73px;margin-left:-60px}#insert-wiki-info-title{text-align:left;margin-left:10px}#insert-wiki-markup-form{height:95%}#insert-wiki-markup-form .wiki-title span{box-sizing:border-box;display:-moz-inline-stack;display:inline-block;margin-bottom:10px;max-width:48%;text-align:left;vertical-align:middle;width:48%}#insert-wiki-markup-form .wiki-title span:first-child{margin-right:20px}#insert-wiki-textarea,#insert-wiki-textarea-preview{box-sizing:border-box;display:-moz-inline-stack;display:inline-block;font-size:14px;height:84%;max-width:48%;vertical-align:middle;width:48%;resize:none}#insert-wiki-textarea.originalDefault{height:100%;min-width:100%;width:100%}#insert-wiki-textarea{font-family:Monaco,Consolas,Courier New,"monospace";margin-right:20px}#insert-wiki-textarea-preview{border:1px solid #ccc;border-radius:3px;position:relative}#insert-wiki-textarea-preview iframe{border:0;height:100%;left:0;min-height:100%;overflow:hidden;position:absolute;top:0;width:100%}</style><style type="text/css">#property-panel a.macro-property-panel-Grey span.icon{background-color:#dfe1e6}#property-panel a.macro-property-panel-Green span.icon{background-color:#00875a}#property-panel a.macro-property-panel-Red span.icon{background-color:#de350b}#property-panel a.macro-property-panel-Yellow span.icon{background-color:#ffab00}#property-panel a.macro-property-panel-Blue span.icon{background-color:#b3d4ff}#property-panel a.macro-property-panel-Blue,#property-panel a.macro-property-panel-Brown,#property-panel a.macro-property-panel-Green,#property-panel a.macro-property-panel-Grey,#property-panel a.macro-property-panel-Red,#property-panel a.macro-property-panel-Yellow{padding:6px;display:inline-block}#property-panel a.macro-property-panel-Blue span.icon,#property-panel a.macro-property-panel-Brown span.icon,#property-panel a.macro-property-panel-Green span.icon,#property-panel a.macro-property-panel-Grey span.icon,#property-panel a.macro-property-panel-Red span.icon,#property-panel a.macro-property-panel-Yellow span.icon{display:inline-block;background-image:none;margin:0;border:0;min-width:auto;border-radius:3px;width:16px;height:16px}.editor-inline-macro[data-macro-name=status]{background:transparent;border:0;min-height:16px;margin:0;vertical-align:-4px}#property-panel .editable.status-macro-title{margin-right:10px;float:none;text-transform:uppercase;text-decoration:none;width:88px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;font-size:11px;padding:0 5px}#property-panel input.editable.status-macro-title{outline:none;height:30px;line-height:20px;vertical-align:bottom;padding-top:2px}</style><style type="text/css" media="print">.tableFloatingHeader{display:none !important;}.tableFloatingHeaderOriginal{position:static !important;}</style></head>

    
<body id="com-atlassian-confluence" class="theme-default  aui-layout aui-theme-default synchrony-active" data-aui-version="8.3.5">

        
            <div id="stp-licenseStatus-banner"></div>
    <ul id="assistive-skip-links" class="assistive">
    <li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#title-heading">Skip to content</a></li>
    <li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#breadcrumbs">Skip to breadcrumbs</a></li>
    <li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#header-menu-bar">Skip to header menu</a></li>
    <li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#navigation">Skip to action menu</a></li>
    <li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#quick-search-query">Skip to quick search</a></li>
</ul>
<div id="page">
<div id="full-height-container"><ul id="messageContainer"></ul>
    <div id="header-precursor">
        <div class="cell">
            
                            </div>
    </div>
        





<header id="header" role="banner" class="fixed-header">
    <nav class="aui-header aui-dropdown2-trigger-group" role="navigation" resolved="" data-aui-responsive="true"><div class="aui-header-inner"><div class="aui-header-before"><a class=" aui-dropdown2-trigger app-switcher-trigger" aria-controls="app-switcher" aria-haspopup="true" role="button" tabindex="0" data-aui-trigger="" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#app-switcher" resolved="" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">Linked Applications</span></a><div id="app-switcher" class="aui-dropdown2 aui-style-default aui-layer" role="menu" aria-hidden="true" data-is-switcher="true" data-environment="{&quot;isUserAdmin&quot;:false,&quot;isAppSuggestionAvailable&quot;:false,&quot;isSiteAdminUser&quot;:false}" resolved=""><div class="aui-dropdown2-section"><ul class="nav-links"><li class="nav-link"><a href="https://codesparks.ncs.com.sg/jira/secure/MyJiraHome.jspa" class="aui-dropdown2-radio " title="https://codesparks.ncs.com.sg/jira/secure/MyJiraHome.jspa" resolved="" aria-checked="false" tabindex="0"><span class="nav-link-label">NCS CodeSparks JIRA</span></a></li><li class="nav-link nav-link-local"><a href="https://codesparks.ncs.com.sg/confluence/" class="aui-dropdown2-radio aui-dropdown2-checked checked" title="https://codesparks.ncs.com.sg/confluence/" resolved="" aria-checked="true" tabindex="0"><span class="nav-link-label">NCS-CodeSparks</span></a></li></ul></div></div></div><div class="aui-header-primary"><h1 id="logo" class="aui-header-logo aui-header-logo-custom"><a href="https://codesparks.ncs.com.sg/confluence/"><img src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/atl.site.logo" alt="NCS-CodeSparks" data-aui-responsive-header-index="0"></a></h1><ul class="aui-nav" style="width: auto;">
                            <li>
            
        
        
<a id="space-menu-link" class=" aui-dropdown2-trigger aui-nav-link" aria-controls="space-menu-link-content" aria-haspopup="true" role="button" title="Spaces" tabindex="0" data-aui-trigger="" resolved="" aria-expanded="false" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#space-menu-link-content">Spaces</a><div id="space-menu-link-content" class="aui-dropdown2 aui-style-default aui-dropdown2-in-header aui-layer" role="menu" aria-hidden="true" resolved=""><div role="application"></div></div>
        </li>
                    <li>
            
    
        
<a id="people-directory-link" href="https://codesparks.ncs.com.sg/confluence/browsepeople.action" class=" aui-nav-imagelink" title="People">
            <span>People</span>
    </a>
        </li>
                                <li class="aui-buttons">
                                    
                                        <a href="https://codesparks.ncs.com.sg/confluence/pages/createpage.action?spaceKey=AMSConnect&amp;fromPageId=187236375&amp;src=quick-create" id="quick-create-page-button" class="aui-button aui-button-primary" title="Create blank page (Type &#39;c&#39;)" tabindex="0">Create</a>
                                <a href="https://codesparks.ncs.com.sg/confluence/pages/createpage.action?spaceKey=AMSConnect&amp;fromPageId=187236375" id="create-page-button" class="aui-button aui-button-primary clc-create-dialog-btn" title="Create from template" tabindex="0"><span class="aui-icon aui-icon-small aui-iconfont-more">Create </span></a>
            </li>
</ul>
</div><div class="aui-header-secondary"><ul class="aui-nav">
                        <li>
        <div id="search-ui" class="aui-quicksearch dont-default-focus header-quicksearch"><input id="quick-search-query" aria-label="Search" placeholder="Search" type="text" title=" (Type &#39;g&#39; then &#39;g&#39;OR &#39;/&#39;)"><div id="quick-search-alert" role="alert">Hit enter to search</div><aui-spinner size="small" resolved=""><div class="aui-spinner spinner"><svg focusable="false" size="20" height="20" width="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="9"></circle></svg></div></aui-spinner></div>
    </li>
        <li>
            
        <a id="help-menu-link" class="aui-nav-link aui-dropdown2-trigger aui-dropdown2-trigger-arrowless" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-haspopup="true" title="Help" resolved="" aria-controls="help-menu-link-content" aria-expanded="false">
        <span class="aui-icon aui-icon-small aui-iconfont-question-filled">Help</span>
    </a>
    <nav id="help-menu-link-content" class="aui-dropdown2 aui-style-default aui-layer" aria-hidden="true" resolved="">
                    <div class="aui-dropdown2-section">
                                <ul id="help-menu-link-leading" class="aui-list-truncate section-leading first">
                                            <li>
        
            
<a id="confluence-help-link" href="https://docs.atlassian.com/confluence/docs-74/" class="    " title="Visit the Confluence documentation home" target="_blank">
        Online Help
</a>
</li>
                                            <li>
    
            
<a id="keyboard-shortcuts-link" href="https://codesparks.ncs.com.sg/confluence" class="    " title="View available keyboard shortcuts (Type &#39;?&#39;)">
        Keyboard Shortcuts
</a>
</li>
                                            <li>
    
            
<a id="feed-builder-link" href="https://codesparks.ncs.com.sg/confluence/dashboard/configurerssfeed.action" class="    " title="Create your custom RSS feed.">
        Feed Builder
</a>
</li>
                                            <li>
    
            
<a id="whats-new-menu-link" href="https://confluence.atlassian.com/display/DOC/Confluence+7.4+Release+Notes?a=false" class="    " title="">
        What’s new
</a>
</li>
                                            <li>
    
            
<a id="gadget-directory-link" href="https://codesparks.ncs.com.sg/confluence" class="   user-item administration-link " title="Browse gadgets provided by Confluence">
        Available Gadgets
</a>
</li>
                                            <li>
    
            
<a id="confluence-about-link" href="https://codesparks.ncs.com.sg/confluence/aboutconfluencepage.action" class="    " title="Get more information about Confluence">
        About Confluence
</a>
</li>
                                    </ul>
            </div>
            </nav>
    
    </li>
        <li>
                
    
    </li>
        <li>
                    
        
        
<a id="notifications-anchor" href="https://codesparks.ncs.com.sg/confluence" class="mw-anchor read aui-nav-imagelink" title="Open Notifications (Type &#39;g&#39; then &#39;n&#39;)"><div class="badge-i aui-icon aui-icon-small aui-iconfont-notification"></div><span class="badge-w"><span class="badge">0</span></span></a>
    
    </li>
        <li>
                                            
        <a id="user-menu-link" class="aui-dropdown2-trigger aui-dropdown2-trigger-arrowless " aria-haspopup="true" data-username="yuchensun" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" title="Sun Yu Chen  (NCS)" resolved="" aria-controls="user-menu-link-content" aria-expanded="false">
                    <div class="aui-avatar aui-avatar-small">
                <div class="aui-avatar-inner">
                                                                                                    <img src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/default.svg">
                </div>
            </div>
            <span class="aui-icon-dropdown"></span>
        </a>
        <nav id="user-menu-link-content" class="aui-dropdown2 aui-style-default aui-layer" aria-hidden="true" resolved="">
                            <div class="aui-dropdown2-section">
                    <ul id="user-menu-link-user-preferences" class="aui-list-truncate section-user-preferences first">
                                                    <li>
        
            
<a id="view-user-history-link" href="https://codesparks.ncs.com.sg/confluence/users/viewuserhistory.action" class="   user-item user-history popup-link " title=" (Type &#39;g&#39; then &#39;r&#39;)">
        Recently viewed
</a>
</li>
                                                    <li>
    
            
<a id="user-recently-worked-on" href="https://codesparks.ncs.com.sg/confluence/dashboard.action#recently-worked" class="   user-item " title="">
        Recently worked on
</a>
</li>
                                            </ul>
                </div>
                            <div class="aui-dropdown2-section">
                    <ul id="user-menu-link-user-content" class="aui-list-truncate section-user-content">
                                                    <li>
    
            
<a id="view-user-profile-link" href="https://codesparks.ncs.com.sg/confluence/users/viewmyprofile.action" class="   user-item user-profile " title="">
        Profile
</a>
</li>
                                                    <li>
    
            
<a id="view-mytasks-link" href="https://codesparks.ncs.com.sg/confluence/plugins/inlinetasks/mytasks.action" class="   user-item list-user-status " title="">
        Tasks
</a>
</li>
                                                    <li>
    
            
<a id="user-favourites-link" href="https://codesparks.ncs.com.sg/confluence/users/viewmyfavourites.action" class="   user-item " title="">
        Saved for later
</a>
</li>
                                                    <li>
    
            
<a id="user-watches-link" href="https://codesparks.ncs.com.sg/confluence/users/viewnotifications.action" class="   user-item " title="">
        Watches
</a>
</li>
                                                    <li>
    
            
<a id="user-drafts-link" href="https://codesparks.ncs.com.sg/confluence/users/viewmydrafts.action" class="   user-item " title="">
        Drafts
</a>
</li>
                                                    <li>
    
            
<a id="user-network-link" href="https://codesparks.ncs.com.sg/confluence/users/viewfollow.action?username=yuchensun" class="   follow-link " title="">
        Network
</a>
</li>
                                                    <li>
    
            
<a id="user-settings-link" href="https://codesparks.ncs.com.sg/confluence/users/viewmysettings.action" class="   user-item " title="">
        Settings
</a>
</li>
                                                    <li>
    
            
<a id="upm-requests-link" href="https://codesparks.ncs.com.sg/confluence/plugins/servlet/upm/requests?source=header_user" class="    " title="">
        Atlassian Marketplace
</a>
</li>
                                            </ul>
                </div>
                            <div class="aui-dropdown2-section">
                    <ul id="user-menu-link-user-operations" class="aui-list-truncate section-user-operations">
                                                    <li>
    
            
<a id="logout-link" href="https://codesparks.ncs.com.sg/confluence/logout.action" class="   user-item logout-link " title="">
        Log Out
</a>
</li>
                                            </ul>
                </div>
                    </nav>
                    
    </li>
    </ul>
</div></div><!-- .aui-header-inner--></nav><!-- .aui-header -->
    <br class="clear">
</header>
    

    
    	<div class="ia-splitter">
    		<div class="ia-splitter-left">
    			<div class="ia-fixed-sidebar collapsed" style="top: 40px; left: 0px; width: 55px; visibility: visible;">
                                            
                            <div class="acs-side-bar ia-scrollable-section"><div class="acs-side-bar-space-info tipsy-enabled" data-configure-tooltip="Edit space details"><div class="avatar"><div class="space-logo" data-key="AMSConnect" data-name="AMSConnect" data-entity-type="confluence.space"><div class="avatar-img-container"><div class="avatar-img-wrapper"><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/AMSConnect+Home?src=sidebar" title="AMSConnect"><img class="avatar-img" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/global.logo" alt="AMSConnect"></a></div></div></div></div><div class="space-information-container"><div class="name"><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/AMSConnect+Home?src=sidebar" title="AMSConnect">AMSConnect</a></div><div class="flyout-handle icon aui-icon aui-icon-small aui-iconfont-edit"></div><div class="favourite-space-icon "><button title="Add to my spaces" id="space-favourite-add" class="space-favourite aui-icon aui-icon-small aui-iconfont-unstar"></button><button class=" space-favourite-hidden  space-favourite aui-icon aui-icon-small aui-iconfont-star" id="space-favourite-remove" title="Remove from my spaces"></button></div></div></div><div class="acs-side-bar-content"><div class="acs-nav-wrapper"><div class="acs-nav" data-has-create-permission="true" data-quick-links-state="null" data-page-tree-state="null" data-nav-type="page-tree"><div class="acs-nav-sections"><div class="main-links-section "><ul class="acs-nav-list"><li class="acs-nav-item wiki current-item" data-collector-key="spacebar-pages"><a class="acs-nav-item-link tipsy-enabled" href="https://codesparks.ncs.com.sg/confluence/collector/pages.action?key=AMSConnect&amp;src=sidebar-pages" data-collapsed-tooltip="Pages"><span class="icon"></span><span class="acs-nav-item-label">Pages</span></a></li><li class="acs-nav-item blog" data-collector-key="spacebar-blogs"><a class="acs-nav-item-link tipsy-enabled" href="https://codesparks.ncs.com.sg/confluence/pages/viewrecentblogposts.action?key=AMSConnect&amp;src=sidebar-blogs" data-collapsed-tooltip="Blog"><span class="icon"></span><span class="acs-nav-item-label">Blog</span></a></li></ul></div><div class="quick-links-wrapper"><h5 class="ia-quick-links-header-title">Space shortcuts</h5><div class="quick-links-section tipsy-enabled " data-collapsed-tooltip="Space shortcuts" original-title=""><ul class="acs-nav-list"><li class="acs-nav-item pinned_page blueprint requirements"><a class="acs-nav-item-link tipsy-enabled" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Product+requirements?src=spaceshortcut" data-collapsed-tooltip="null"><span class="icon"></span><span class="acs-nav-item-label">Product requirements</span></a></li><li class="acs-nav-item pinned_page blueprint file-list"><a class="acs-nav-item-link tipsy-enabled" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/File+lists?src=spaceshortcut" data-collapsed-tooltip="null"><span class="icon"></span><span class="acs-nav-item-label">File lists</span></a></li><li class="acs-nav-item pinned_page blueprint kb-how-to-article"><a class="acs-nav-item-link tipsy-enabled" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/How-to+articles?src=spaceshortcut" data-collapsed-tooltip="null"><span class="icon"></span><span class="acs-nav-item-label">How-to articles</span></a></li></ul></div></div></div></div></div><div class="ia-secondary-container tipsy-enabled" data-tree-type="page-tree"><div class="ia-secondary-header"><h5 class="ia-secondary-header-title page-tree"><span class="icon"></span><span class="label">Page tree</span></h5></div><div class="ia-secondary-content">


<div class="plugin_pagetree conf-macro output-inline" data-hasbody="false" data-macro-name="pagetree">

        
        
    <ul class="plugin_pagetree_children_list plugin_pagetree_children_list_noleftspace">
        <div class="plugin_pagetree_children" id="children131204044-0">
        



<ul class="plugin_pagetree_children_list" id="child_ul131204044-0">

            

            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus133530775-0" class="plugin_pagetree_childtoggle aui-icon aui-icon-small aui-iconfont-chevron-right" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" data-type="toggle" data-page-id="133530775" data-tree-id="0">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan133530775-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/ServiceOps.AI?src=contextnavpagetreemode">ServiceOps.AI</a>
        </span>
            </div>

        <div id="children133530775-0" class="plugin_pagetree_children_container">
                                                
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan135136302-0">                        <a href="https://codesparks.ncs.com.sg/confluence/pages/viewpage.action?pageId=135136302&amp;src=contextnavpagetreemode">Angular - Timer Service (Centralize Timer)</a>
        </span>
            </div>

        <div id="children135136302-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan134250973-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Development+Environment?src=contextnavpagetreemode">Development Environment</a>
        </span>
            </div>

        <div id="children134250973-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus134250982-0" class="plugin_pagetree_childtoggle aui-icon aui-icon-small aui-iconfont-chevron-right" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" data-type="toggle" data-page-id="134250982" data-tree-id="0">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan134250982-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/File+lists?src=contextnavpagetreemode">File lists</a>
        </span>
            </div>

        <div id="children134250982-0" class="plugin_pagetree_children_container">
                                                
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan148177789-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Fortify+Scan?src=contextnavpagetreemode">Fortify Scan</a>
        </span>
            </div>

        <div id="children148177789-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus134251625-0" class="plugin_pagetree_childtoggle aui-icon aui-icon-small aui-iconfont-chevron-down" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" data-type="toggle" data-page-id="134251625" data-tree-id="0" data-expanded="true" data-children-loaded="true">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan134251625-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/How-to+articles?src=contextnavpagetreemode">How-to articles</a>
        </span>
            </div>

        <div id="children134251625-0" class="plugin_pagetree_children_container">
                                                                            <ul class="plugin_pagetree_children_list " id="child_ul134251625-0">
                                        
                                                                    <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan181928685-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/About+Neo4j?src=contextnavpagetreemode">About Neo4j</a>
        </span>
            </div>

        <div id="children181928685-0" class="plugin_pagetree_children_container">
            </div>
    </li>
                                            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus170230718-0" class="plugin_pagetree_childtoggle aui-icon aui-icon-small aui-iconfont-chevron-right" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" data-type="toggle" data-page-id="170230718" data-tree-id="0">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan170230718-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Fortify+Fixes?src=contextnavpagetreemode">Fortify Fixes</a>
        </span>
            </div>

        <div id="children170230718-0" class="plugin_pagetree_children_container">
                                                
            </div>
    </li>
                                            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan172917458-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Generate+Fortify+Report+using+SSC?src=contextnavpagetreemode">Generate Fortify Report using SSC</a>
        </span>
            </div>

        <div id="children172917458-0" class="plugin_pagetree_children_container">
            </div>
    </li>
                                            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus170230720-0" class="plugin_pagetree_childtoggle aui-icon aui-icon-small aui-iconfont-chevron-right" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" data-type="toggle" data-page-id="170230720" data-tree-id="0">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan170230720-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Installation+and+Configuration?src=contextnavpagetreemode">Installation and Configuration</a>
        </span>
            </div>

        <div id="children170230720-0" class="plugin_pagetree_children_container">
                                                
            </div>
    </li>
                                            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus175964223-0" class="plugin_pagetree_childtoggle aui-icon aui-icon-small aui-iconfont-chevron-right" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" data-type="toggle" data-page-id="175964223" data-tree-id="0">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan175964223-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/NexusIQ+Mitigation?src=contextnavpagetreemode">NexusIQ Mitigation</a>
        </span>
            </div>

        <div id="children175964223-0" class="plugin_pagetree_children_container">
                                                
            </div>
    </li>
                                            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan175964181-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Python+Fortify+Scan+Command?src=contextnavpagetreemode">Python Fortify Scan Command</a>
        </span>
            </div>

        <div id="children175964181-0" class="plugin_pagetree_children_container">
            </div>
    </li>
                                            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan175112212-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Python+Requirements+File+Nexus+IQ+Scan?src=contextnavpagetreemode">Python Requirements File Nexus IQ Scan</a>
        </span>
            </div>

        <div id="children175112212-0" class="plugin_pagetree_children_container">
            </div>
    </li>
                                            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span plugin_pagetree_current" id="childrenspan187236375-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery?src=contextnavpagetreemode">RabbitMQ high availability and disaster recovery</a>
        </span>
            </div>

        <div id="children187236375-0" class="plugin_pagetree_children_container">
            </div>
    </li>
                                                                </ul>
                            
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan139362644-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/In+DLQ+messages++back+to+pervious+queue?src=contextnavpagetreemode">In DLQ messages  back to pervious queue</a>
        </span>
            </div>

        <div id="children139362644-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan136545929-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/notification+microservice+modify+the+token+authentication+for+access+the+gateway+microservice?src=contextnavpagetreemode">notification microservice modify the token authentication for access the gateway microservice</a>
        </span>
            </div>

        <div id="children136545929-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan135824888-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Notification+receiving+information++format?src=contextnavpagetreemode">Notification receiving information  format</a>
        </span>
            </div>

        <div id="children135824888-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan133530774-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Product+requirements?src=contextnavpagetreemode">Product requirements</a>
        </span>
            </div>

        <div id="children133530774-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                    <span class="no-children icon"></span>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan143130972-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Sonatype+Nexus+IQ+Scan?src=contextnavpagetreemode">Sonatype Nexus IQ Scan</a>
        </span>
            </div>

        <div id="children143130972-0" class="plugin_pagetree_children_container">
            </div>
    </li>
            <li>
    <div class="plugin_pagetree_childtoggle_container">
                                            <a id="plusminus170230784-0" class="plugin_pagetree_childtoggle aui-icon aui-icon-small aui-iconfont-chevron-right" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" data-type="toggle" data-page-id="170230784" data-tree-id="0">
            </a>
            </div>
    <div class="plugin_pagetree_children_content">
          
        
                    <span class="plugin_pagetree_children_span" id="childrenspan170230784-0">                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/Singtel+Harmony+POC?src=contextnavpagetreemode">Singtel Harmony POC</a>
        </span>
            </div>

        <div id="children170230784-0" class="plugin_pagetree_children_container">
                                                
            </div>
    </li>
            </ul>
</div>
    </ul>

    <fieldset class="hidden">
        <input type="hidden" name="treeId" value="">
        <input type="hidden" name="treeRequestId" value="/confluence/plugins/pagetree/naturalchildren.action?decorator=none&amp;excerpt=false&amp;sort=position&amp;reverse=false&amp;disableLinks=false&amp;expandCurrent=true&amp;placement=sidebar">
        <input type="hidden" name="treePageId" value="187236375">

        <input type="hidden" name="noRoot" value="false">
        <input type="hidden" name="rootPageId" value="131204044">

        <input type="hidden" name="rootPage" value="">
        <input type="hidden" name="startDepth" value="0">
        <input type="hidden" name="spaceKey" value="AMSConnect">

        <input type="hidden" name="i18n-pagetree.loading" value="Loading...">
        <input type="hidden" name="i18n-pagetree.error.permission" value="Unable to load page tree. It seems that you do not have permission to view the root page.">
        <input type="hidden" name="i18n-pagetree.eeror.general" value="There was a problem retrieving the page tree. Please check the server log file for more information.">
        <input type="hidden" name="loginUrl" value="/confluence/login.action?os_destination=%2Fpages%2Fviewpage.action%3FspaceKey%3DAMSConnect%26title%3DRabbitMQ%2Bhigh%2Bavailability%2Band%2Bdisaster%2Brecovery&amp;permissionViolation=true">
        <input type="hidden" name="mobile" value="false">
        <input type="hidden" name="placement" value="sidebar">

                <fieldset class="hidden">
                                                <input type="hidden" name="ancestorId" value="134251625">
                                    <input type="hidden" name="ancestorId" value="131204044">
                                    </fieldset>
    </fieldset>
</div>
</div></div></div><div class="hidden"><a href="https://codesparks.ncs.com.sg/confluence/collector/pages.action?key=AMSConnect&amp;src=sidebar" id="space-pages-link" title=" (Type &#39;g&#39; then &#39;s&#39;)"></a><script type="text/x-template" title="logo-config-content"><h2>Space Details</h2><div class="personal-space-logo-hint">Your profile picture is used as the logo for your personal space. <a href="/confluence/users/profile/editmyprofilepicture.action" target="_blank">Change your profile picture</a>.</div></script></div></div><div class="space-tools-section"><div id="space-tools-menu-additional-items" class="hidden"><div data-label="Reorder pages" data-class="" data-href="/confluence/pages/reorderpages.action?key=AMSConnect">Reorder pages</div><div data-label="Configure sidebar" data-class="configure-sidebar" data-href="">Configure sidebar</div></div><button id="space-tools-menu-trigger" class=" aui-dropdown2-trigger aui-button aui-button-subtle tipsy-enabled aui-dropdown2-trigger-arrowless " aria-controls="space-tools-menu" aria-haspopup="true" role="button" data-aui-trigger="" resolved="" aria-expanded="false" data-collapsed-tooltip="Space tools"><span class="aui-icon aui-icon-small aui-iconfont-configure">Configure</span><span class="aui-button-label">Space tools</span><span class="aui-icon "></span></button><div id="space-tools-menu" class="aui-dropdown2 aui-style-default space-tools-dropdown aui-layer" role="menu" aria-hidden="true" data-aui-alignment="top left" resolved=""><div role="presentation" class="aui-dropdown2-section space-tools-navigation"><div role="group"><ul class="aui-list-truncate" role="presentation"><li role="presentation"><a role="menuitem" tabindex="-1" class="" href="https://codesparks.ncs.com.sg/confluence/spaces/viewspacesummary.action?key=AMSConnect&amp;src=spacetools">Overview</a></li><li role="presentation"><a role="menuitem" tabindex="-1" class="" href="https://codesparks.ncs.com.sg/confluence/spaces/spacepermissions.action?key=AMSConnect&amp;src=spacetools">Permissions</a></li><li role="presentation"><a role="menuitem" tabindex="-1" class="" href="https://codesparks.ncs.com.sg/confluence/pages/templates2/listpagetemplates.action?key=AMSConnect&amp;src=spacetools">Content Tools</a></li><li role="presentation"><a role="menuitem" tabindex="-1" class="" href="https://codesparks.ncs.com.sg/confluence/spaces/choosetheme.action?key=AMSConnect&amp;src=spacetools">Look and Feel</a></li><li role="presentation"><a role="menuitem" tabindex="-1" class="" href="https://codesparks.ncs.com.sg/confluence/spaces/hipchat2.action?key=AMSConnect&amp;src=spacetools">Integrations</a></li></ul></div></div><div role="presentation" class="aui-dropdown2-section space-operations"><div role="group"><ul class="aui-list-truncate" role="presentation"><li role="presentation"><a role="menuitem" tabindex="-1" class="" href="https://codesparks.ncs.com.sg/confluence/pages/reorderpages.action?key=AMSConnect&amp;src=spacetools">Reorder pages</a></li><li role="presentation"><a role="menuitem" tabindex="-1" class=" configure-sidebar">Configure sidebar</a></li></ul></div></div></div><a class="expand-collapse-trigger aui-icon aui-icon-small aui-iconfont-chevron-double-right" data-tooltip="Expand sidebar ( [ )"></a></div>
                    
                        			<div class="ia-splitter-handle tipsy-enabled" data-tooltip="Expand sidebar ( [ )" original-title=" (Type &#39;[&#39;)"><div class="ia-splitter-handle-highlight confluence-icon-grab-handle"></div></div></div>
    		</div>
        <!-- \#header -->

            
    
        <div id="main" class=" aui-page-panel" style="margin-left: 55px; margin-top: 40px;">
                        <div id="main-header-placeholder" style="margin: -10px 0px 20px; padding: 0px; height: 70px;"><h1 class="with-breadcrumbs" style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 28px; font-style: normal; font-weight: 500; text-decoration: none solid rgb(23, 43, 77); letter-spacing: -0.28px; text-align: start; padding: 35px 0px 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px;">
                                                <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Oxygen, Ubuntu, &quot;Fira Sans&quot;, &quot;Droid Sans&quot;, &quot;Helvetica Neue&quot;, sans-serif; font-size: 28px; font-style: normal; font-weight: 500; margin: 0px; padding: 0px; color: rgb(23, 43, 77); text-decoration: none solid rgb(23, 43, 77); letter-spacing: -0.28px; text-align: start;">RabbitMQ high availability and disaster recovery</a>
                                    </h1></div><div id="main-header" class="overlay-header" style="position: fixed; width: 1214px; right: 0px; top: -11px; margin-top: 0px; padding: 10px 40px; z-index: 0;">
                        
    <div id="navigation" class="content-navigation view">
                    <ul class="ajs-menu-bar">
                                                                    <li class="ajs-button normal">

        
        
    
                                                        
    
    
            <a id="editPageLink" href="https://codesparks.ncs.com.sg/confluence/pages/editpage.action?pageId=187236375" rel="nofollow" class="aui-button aui-button-subtle edit" accesskey="e" title="Edit (Type &#39;e&#39;)">
                        <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-edit"></span>
                                <u>E</u>dit
            </span>        </a>
    </li>
                                            <li class="ajs-button normal">

        
        
    
                                                        
    
    
            <a id="page-favourite" href="https://codesparks.ncs.com.sg/confluence" rel="nofollow" class="aui-button aui-button-subtle action-page-favourite" accesskey="f" title="Save for later (Type &#39;f&#39;)">
                        <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-unstar"></span>
                                Save <u>f</u>or later
            </span>        </a>
    </li>
                                            <li class="ajs-button normal">

        
        
    
                                                        
    
    
            <a id="watch-content-button" href="https://codesparks.ncs.com.sg/confluence" rel="nofollow" class="aui-button aui-button-subtle watch-menu watch-state-initialised" title="Stop watching (w)">
                        <span><span class="aui-icon aui-icon-small aui-iconfont-watch"></span> <u>W</u>atching</span>        </a>
    </li>
                                            <li class="ajs-button normal">

        
        
    
                                                        
    
    
            <a id="shareContentLink" href="https://codesparks.ncs.com.sg/confluence" rel="nofollow" class="aui-button aui-button-subtle share" title="Share this page with others (Type &#39;s&#39;OR &#39;k&#39;)">
                        <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-share"></span>
                                <u>S</u>hare
            </span>        </a>
    </li>
                    
        <li class="normal ajs-menu-item">
        <a id="action-menu-link" class="action aui-dropdown2-trigger-arrowless aui-button aui-button-subtle ajs-menu-title aui-dropdown2-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-haspopup="true" aria-label="More options" data-container="#navigation" resolved="" aria-controls="action-menu" aria-expanded="false">
            <span>
                                    <span class="aui-icon aui-icon-small aui-iconfont-more" aria-label="More options"></span>
                                
            </span>
        </a>         <div id="action-menu" class="aui-dropdown2 aui-style-default aui-layer most-right-menu-item" aria-hidden="true" resolved="">
                            <div class="aui-dropdown2-section">
                    <ul id="action-menu-primary" class="section-primary first">
                                                    <li>

    
        
    
                                                        
    
    
            <a id="view-attachments-link" href="https://codesparks.ncs.com.sg/confluence/pages/viewpageattachments.action?pageId=187236375" rel="nofollow" class="action-view-attachments" accesskey="t" title="View Attachments (Type &#39;t&#39;)">
                        <span>
                                A<u>t</u>tachments (163)
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-view-history-link" href="https://codesparks.ncs.com.sg/confluence/pages/viewpreviousversions.action?pageId=187236375" rel="nofollow" class="action-view-history" title="">
                        <span>
                                Page History
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-page-permissions-link" href="https://codesparks.ncs.com.sg/confluence/pages/viewinfo.action?pageId=187236375" rel="nofollow" class="action-page-permissions" title="Edit restrictions">
                        <span>
                                Restrictions
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="who-can-view-button-ak-button" href="https://codesparks.ncs.com.sg/confluence" rel="nofollow" class="who-can-view-link" title="">
                        <span>
                                People who can view
            </span>        </a>
    </li>
                                        </ul>
                </div>
                            <div class="aui-dropdown2-section">
                    <ul id="action-menu-secondary" class="section-secondary">
                                                    <li>

    
        
    
                                                        
    
    
            <a id="view-page-info-link" href="https://codesparks.ncs.com.sg/confluence/pages/viewinfo.action?pageId=187236375" rel="nofollow" class="action-view-info" title="">
                        <span>
                                Page Information
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="view-resolved-comments" href="https://codesparks.ncs.com.sg/confluence" rel="nofollow" class="" title="">
                        <span>Resolved comments (0)</span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="view-in-hierarchy-link" href="https://codesparks.ncs.com.sg/confluence/pages/reorderpages.action?key=AMSConnect&amp;openId=187236375#selectedPageInHierarchy" rel="nofollow" class="" title="">
                        <span>
                                View in Hierarchy
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-view-source-link" href="https://codesparks.ncs.com.sg/confluence/plugins/viewsource/viewpagesrc.action?pageId=187236375" rel="nofollow" class="action-view-source popup-link" title="">
                        <span>
                                View Source
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-export-pdf-link" href="https://codesparks.ncs.com.sg/confluence/spaces/flyingpdf/pdfpageexport.action?pageId=187236375" rel="nofollow" class="" title="">
                        <span>
                                Export to PDF
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-export-word-link" href="https://codesparks.ncs.com.sg/confluence/exportword?pageId=187236375" rel="nofollow" class="action-export-word" title="">
                        <span>
                                Export to Word
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="import-word-doc" href="https://codesparks.ncs.com.sg/confluence/pages/worddav/uploadimport.action?pageId=187236375" rel="nofollow" class="" title="">
                        <span>
                                Import Word Document
            </span>        </a>
    </li>
                                        </ul>
                </div>
                            <div class="aui-dropdown2-section">
                    <ul id="action-menu-modify" class="section-modify">
                                                    <li>

    
        
    
                                                        
    
    
            <a id="action-copy-page-link" href="https://codesparks.ncs.com.sg/confluence/pages/copypage.action?idOfPageToCopy=187236375&amp;spaceKey=AMSConnect" rel="nofollow" class="action-copy" title="">
                        <span>
                                Copy
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-move-page-dialog-link" href="https://codesparks.ncs.com.sg/confluence/pages/viewpage.action?pageId=187236375" rel="nofollow" class="action-move" title="">
                        <span>
                                Move
            </span>        </a>
    </li>
                                                <li>

    
        
    
                                                        
    
    
            <a id="action-remove-content-link" href="https://codesparks.ncs.com.sg/confluence/pages/removepage.action?pageId=187236375" rel="nofollow" class="action-remove" title="">
                        <span>
                                Delete
            </span>        </a>
    </li>
                                        </ul>
                </div>
                    </div>
    </li>
            </ul>
    </div>

            
            <div id="title-heading" class="pagetitle with-breadcrumbs">
                
                                    <div id="breadcrumb-section">
                        
    
    
    <ol id="breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="https://codesparks.ncs.com.sg/confluence/collector/pages.action?key=AMSConnect&amp;src=breadcrumbs-collector">Dashboard</a></span>
                                                                                    
                        
        </li><li>
                        
                            <span class=""><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/AMSConnect+Home?src=breadcrumbs">AMSConnect Home</a></span>
                                                                                    
                        
        </li><li>
                        
                            <span class=""><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/How-to+articles?src=breadcrumbs-parent">How-to articles</a></span>
                                                                    </li></ol>


                    </div>
                
                
        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#page-banner-end" class="assistive">Skip to end of banner</a>
<div id="page-banner-start" class="assistive"></div>

                    
            <div id="page-metadata-banner" style="visibility: visible;"><ul class="banner"><li id="system-content-items" class="noprint"><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" title="Unrestricted" id="content-metadata-page-restrictions" class="aui-icon aui-icon-small aui-iconfont-unlocked system-metadata-restrictions" resolved=""></a><a href="https://codesparks.ncs.com.sg/confluence/pages/viewpageattachments.action?pageId=187236375&amp;metadataLink=true" title="163 attachments" id="content-metadata-attachments" class="aui-icon aui-icon-small aui-iconfont-attachment"></a></li><li class="page-metadata-item noprinthas-button" id="content-metadata-jira-wrapper"><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" title="" id="content-metadata-jira" class="aui-button aui-button-subtle content-metadata-jira tipsy-disabled hidden"><span>Jira links</span></a></li></ul></div>
            

<a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#page-banner-start" class="assistive">Go to start of banner</a>
<div id="page-banner-end" class="assistive"></div>
    

                <h1 id="title-text" class="with-breadcrumbs" style="display: none;">
                                                <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery">RabbitMQ high availability and disaster recovery</a>
                                    </h1>
            </div>
        </div><!-- \#main-header -->
        
        

        <div id="sidebar-container">
                                                </div><!-- \#sidebar-container -->

        
    

        




            
    

                                
    

    
    
        
    
    
                    
    

    

    
            
        

    
    

    
            
        



    
<div id="content" class="page view">
    


<div id="action-messages">
                        </div>



            <script type="text/x-template" title="searchResultsGrid">
    <table class="aui">
        <thead>
            <tr class="header">
                <th class="search-result-title">Page Title</th>
                <th class="search-result-space">Space</th>
                <th class="search-result-date">Updated</th>
            </tr>
        </thead>
    </table>
</script>
<script type="text/x-template" title="searchResultsGridCount">
    <p class="search-result-count">{0}</p>
</script>
<script type="text/x-template" title="searchResultsGridRow">
    <tr class="search-result">
        <td class="search-result-title"><a href="{1}" class="content-type-{2}"><span>{0}</span></a></td>
        <td class="search-result-space"><a class="space" href="/confluence/display/{4}/" title="{3}">{3}</a></td>
        <td class="search-result-date"><span class="date" title="{6}">{5}</span></td>
    </tr>
</script>
        
    
            

        
                            
    

                    

        
        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#page-metadata-end" class="assistive">Skip to end of metadata</a>
<div id="page-metadata-start" class="assistive"></div>

    <div class="page-metadata">
        <ul>
            <li class="page-metadata-modification-info">
                
        
    
        
    
        
            
            Created by <span class="author">     <a href="https://codesparks.ncs.com.sg/confluence/display/~yuchensun" class="url fn confluence-userlink userlink-0" data-username="yuchensun" title="" data-user-hover-bound="true">Sun Yu Chen  (NCS)</a></span>, last modified on <a class="last-modified" title="Show changes" href="https://codesparks.ncs.com.sg/confluence/pages/diffpagesbyversion.action?pageId=187236375&amp;selectedPageVersions=109&amp;selectedPageVersions=110">Apr 23, 2021</a>
                </li>
        </ul>
    </div>


<a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#page-metadata-start" class="assistive">Go to start of metadata</a>
<div id="page-metadata-end" class="assistive"></div>

        
                                            
        <div id="main-content" class="wiki-content">
                           
        <h2 id="RabbitMQhighavailabilityanddisasterrecovery-Abstract">Abstract</h2><p>For high availability RabbitMQ team recommend&nbsp;<a href="https://www.rabbitmq.com/clustering.html" class="external-link" rel="nofollow">clustering&nbsp;</a>multiple RabbitMQ brokers within a single data center or cloud region and the use of&nbsp;replicated queues. Clustering requires highly reliable, low latency links between brokers. Clustering over a WAN is highly discouraged.<br><br>Disaster recovery typically requires asynchronous replication of data between data centers. RabbitMQ does not currently support this feature but other message routing features can be leveraged to offer a partial solution.<br><br>RabbitMQ does have support for replication of schema (the exchanges, queues, bindings, users, permissions, policies etc) which allows for a secondary cluster in a different data center to be an empty mirror of the primary cluster. A fail-over using only schema synchronisation would provide availability but with a data loss window.</p><h2 id="RabbitMQhighavailabilityanddisasterrecovery-1.CreatemultipleRabbitMQinstancesbydocker."><strong>1.Create multiple RabbitMQ instances by docker.</strong></h2><ol><li><p>Check docker version.</p><pre><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_18-27-34.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_18-27-34.png?version=1&amp;modificationDate=1617272854000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236595" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_18-27-34.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></pre></li><li><p>Pull rabbitmq repository.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_18-28-18.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_18-28-18.png?version=1&amp;modificationDate=1617272898000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236596" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_18-28-18.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></p></li><li><p>Create two rabbitmq containers by below commands.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="761" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_18-28-58.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_18-28-58.png?version=1&amp;modificationDate=1617272938000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236597" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_18-28-58.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Linux</b></div><div class="codeContent panelContent pdl">
<div><div id="highlighter_556532" class="syntaxhighlighter sh-confluence nogutter  bash"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="bash plain">docker run -d --</code><code class="bash functions">hostname</code> <code class="bash plain">rabbit1 --name rabbit1 -p 15672:15672 -p 5672:5672 -e RABBITMQ_ERLANG_COOKIE=</code><code class="bash string">'rabbitcookie'</code> <code class="bash plain">rabbitmq:management</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="bash plain">docker run -d --</code><code class="bash functions">hostname</code> <code class="bash plain">rabbit2 --name rabbit2 -p 15673:15672 -p 5673:5672 --link rabbit1:rabbit1 -e RABBITMQ_ERLANG_COOKIE=</code><code class="bash string">'rabbitcookie'</code> <code class="bash plain">rabbitmq:management</code></div></div></td></tr></tbody></table></div></div>
</div></div><pre><br><br></pre></li><li><p>Check containers' status.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_18-31-28.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_18-31-28.png?version=1&amp;modificationDate=1617273088000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236598" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_18-31-28.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><br></p></li><li><p>Check node status.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_18-33-15.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_18-33-15.png?version=1&amp;modificationDate=1617273195000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236599" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_18-33-15.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><br></p></li></ol><h2 id="RabbitMQhighavailabilityanddisasterrecovery-2.TestingforRabbitMQmultipleinstances(multipleinstancesisnotclustered)"><strong>2.Testing for RabbitMQ multiple instances (multiple instances is not clustered)</strong></h2><h3 id="RabbitMQhighavailabilityanddisasterrecovery-Scenario1.Whentheinstance1down,ifthemessagecanforwardtoinstance2automatically?ThepurposeofthistestingistotesttheSpringRabbitMQfailoverfrominstance1toinstance2.">Scenario 1. When the instance1 down, if the message can forward to instance2 automatically?<br>The purpose of this testing is to test the Spring RabbitMQ failover from instance1 to instance2.</h3><ol><li>Change configuration at producer and consumer project.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="95" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_17-25-26.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_17-25-26.png?version=1&amp;modificationDate=1616405128000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236400" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_17-25-26.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li><li>Send 2 messages to instance1 and debug stop at message3.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_17-31-3.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_17-31-3.png?version=1&amp;modificationDate=1616405465000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236401" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_17-31-3.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="769" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_17-31-54.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_17-31-54.png?version=1&amp;modificationDate=1616405516000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236402" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_17-31-54.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li><li>Manually stop the service of instance1.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="797" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_17-35-22.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_17-35-22.png?version=1&amp;modificationDate=1616405724000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236404" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_17-35-22.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li><li>Then can see the next message already forward to the instance2.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="796" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_17-41-11.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_17-41-11.png?version=1&amp;modificationDate=1616406074000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236405" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_17-41-11.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li><li>And at&nbsp;consumer project, it will get the messages like:<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="139" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_17-43-34.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_17-43-34.png?version=1&amp;modificationDate=1616406216000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236406" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_17-43-34.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></li></ol><p style="text-align: left;"><br></p><h3 id="RabbitMQhighavailabilityanddisasterrecovery-Scenario2.Wheninstance1isofflineandinstance2isonline,ifthemessagesininstance1queuearenotconsume,whatwillhappen?">Scenario 2. When instance1 is offline and instance2 is online, if the messages in instance1 queue are not consume, what will happen?</h3><p>Instance1 - "test1", "test2"</p><p>Instance2 - "test3"</p><ol><li>The messages of instance2 will consume by the consumer 1st. Once instance1 is online, the 2 messages will be consumed by the consumer.<br><br></li><li>Below is an&nbsp; example at the consumer project:</li></ol><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="143" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_17-57-21.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_17-57-21.png?version=1&amp;modificationDate=1616407044000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236410" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_17-57-21.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><h3 id="RabbitMQhighavailabilityanddisasterrecovery-Scenario3.Whentheinstance1recovery,ifthemessagesofinstance2stillnotsendtotallywhatwillhappen?">Scenario 3. When the instance1 recovery , if the messages of instance2 still not send totally what will happen?</h3><ol><li>Both Instance is online, 2 messages [test1, test2] are sent to instance1, 1 message&nbsp;[test3] are sent to instance2.<br><br>Instance1 - "test1", "test2"<br>Instance2 - "test3"<br><br></li><li>Instance2 brought offline<br><br></li><li>3 messages [test1, test2, test3] are sent to instance1,<br><br>Instance1 - "test1", "test2", "test3"<br><br></li><li>Instance2 brought online.<br><br></li><li>Consumer start to consume message.</li></ol><p style="margin-left: 30.0px;"><br>Below is an&nbsp; example at the consumer project:<br><br>The consumer listener will only listen the instance1 and instance2 message will not be consumed even though it is online.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="792" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_18-8-42.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_18-8-42.png?version=1&amp;modificationDate=1616407724000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236416" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_18-8-42.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">If we want to consume messages from multiple rabbitmq instances (without queue mirroring), we can change the configuration of the consumer project to connect to multiple rabbitmq instances.</p><p style="margin-left: 30.0px;">However the sequencing of the message are NOT guarantee.</p><p style="margin-left: 30.0px;"><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_18-36-5.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_18-36-5.png?version=1&amp;modificationDate=1616409367000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236423" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_18-36-5.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-3-22_18-37-16.png" data-image-src="/confluence/download/attachments/187236375/image2021-3-22_18-37-16.png?version=1&amp;modificationDate=1616409438000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236424" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-3-22_18-37-16.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><br></p><h2 id="RabbitMQhighavailabilityanddisasterrecovery-3.ConfigurequeuemirroringforRabbitMQCluster."><strong>3.Configure queue mirroring for RabbitMQ Cluster.</strong></h2><ol><li><p>Make rabbit2 node join cluster by the below commands. Sometimes it will throw the warning about rabbitmq_erlang_cookie,</p><p class="auto-cursor-target">if you dont want to use this cookie you can manually synchronize the erlang cookies from different containers.<br><br></p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_259503" class="syntaxhighlighter sh-confluence nogutter  bash"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="bash plain">docker </code><code class="bash functions">exec</code> <code class="bash plain">-it rabbit2 </code><code class="bash functions">bash</code></div><div class="line number2 index1 alt1"><code class="bash plain">rabbitmqctl stop_app</code></div><div class="line number3 index2 alt2"><code class="bash plain">rabbitmqctl reset</code></div><div class="line number4 index3 alt1"><code class="bash plain">rabbitmqctl join_cluster rabbit@rabbit1</code></div><div class="line number5 index4 alt2"><code class="bash plain">rabbitmqctl start_app</code></div><div class="line number6 index5 alt1"><code class="bash functions">exit</code></div></div></td></tr></tbody></table></div></div>
</div></div><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="761" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_18-42-33.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_18-42-33.png?version=1&amp;modificationDate=1617273753000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236601" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_18-42-33.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p></li><li><p class="auto-cursor-target">Check the cluster nodes status at web management.<br><br></p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_18-45-27.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_18-45-27.png?version=1&amp;modificationDate=1617273927000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236602" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_18-45-27.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li><li><p class="auto-cursor-target">Set ha policy at rabbitmq1 to open mirroring queue.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Linux</b></div><div class="codeContent panelContent pdl">
<div><div id="highlighter_184723" class="syntaxhighlighter sh-confluence nogutter  bash"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="bash plain">docker </code><code class="bash functions">exec</code> <code class="bash plain">-it rabbit1 </code><code class="bash functions">bash</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="bash plain">rabbitmqctl set_policy my_ha </code><code class="bash string">"^"</code> <code class="bash string">'{"ha-mode":"all","ha-sync-mode":"automatic"}'</code></div></div></td></tr></tbody></table></div></div>
</div></div><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Windows</b></div><div class="codeContent panelContent pdl">
<div><div id="highlighter_789841" class="syntaxhighlighter sh-confluence nogutter  powershell"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="powershell plain">If at Windows system the command should change to :&nbsp;rabbitmqctl set_policy my_ha </code><code class="powershell string">"^"</code> <code class="powershell string">"{"</code><code class="powershell string">"ha-mode"</code><code class="powershell string">":"</code><code class="powershell string">"all"</code><code class="powershell string">","</code><code class="powershell string">"ha-sync-mode"</code><code class="powershell string">":"</code><code class="powershell string">"automatic"</code><code class="powershell string">"}"</code></div></div></td></tr></tbody></table></div></div>
</div></div><p class="auto-cursor-target"><br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="759" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_18-50-13.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_18-50-13.png?version=1&amp;modificationDate=1617274213000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236603" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_18-50-13.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p></li><li>Open queue module to see features for your queue.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="778" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_18-52-4.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_18-52-4.png?version=1&amp;modificationDate=1617274324000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236604" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_18-52-4.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li></ol><h2 id="RabbitMQhighavailabilityanddisasterrecovery-4.TestingforRabbitMQmultiplenodeswithmirroringqueue"><strong>4.Testing for RabbitMQ multiple nodes with mirroring queue</strong></h2><h3 id="RabbitMQhighavailabilityanddisasterrecovery-Scenario4.Whentheinstance1isoffline,willthemessagesbereplicatedfrominstance1toinstance2automatically?">Scenario 4. When the instance1 is offline, will the messages be replicated from instance1 to instance2 automatically?</h3><ol><li>Send 3 messages to rabbitmq@rabbitmq1 instance1.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="882" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_19-26-37.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_19-26-37.png?version=1&amp;modificationDate=1617276397000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236608" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_19-26-37.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br>.</li><li>Close rabbitmq1 container.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_19-30-7.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_19-30-7.png?version=1&amp;modificationDate=1617276608000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236610" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_19-30-7.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><br></li><li>Check the web management and find instance2 already connect to rabbitmq@rabbitmq2 node and the message is same.<br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_19-31-18.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_19-31-18.png?version=1&amp;modificationDate=1617276679000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236611" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_19-31-18.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li></ol><h3 id="RabbitMQhighavailabilityanddisasterrecovery-Scenario5.Instance2OnlineandInstance1Offline,willconsumedmessagebereplicatedtoinstance1whenitisOnline?">Scenario 5. Instance2 Online and Instance1 Offline, will consumed message be replicated to instance1 when it is Online?</h3><ol><li class="tw-data-text tw-text-large XcVN5d tw-ta">Let consumer consume 2 messages from the graph_data_queue and left with 1 message not be consumed.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="779" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_19-41-55.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_19-41-55.png?version=1&amp;modificationDate=1617277315000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236612" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_19-41-55.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></li><li class="tw-data-text tw-text-large XcVN5d tw-ta">Reopen rabbitmq1 (instance1) container.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="745" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_19-44-14.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_19-44-14.png?version=1&amp;modificationDate=1617277454000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236613" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_19-44-14.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li><li class="tw-data-text tw-text-large XcVN5d tw-ta">Shutdown rabbitmq2 (instance2) container.<br><br></li><li class="tw-data-text tw-text-large XcVN5d tw-ta">The rabbit@rabbitmq1 instance messages are synchronized and it means this configuration can fix the issue from scenario 3.</li></ol><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="780" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_19-46-55.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_19-46-55.png?version=1&amp;modificationDate=1617277616000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236614" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_19-46-55.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p><br></p><h3 id="RabbitMQhighavailabilityanddisasterrecovery-Scenario6.Whenthereceiverisprocessingoneofthemessagefrominstance1anditisshutdown.Whatwillhappen?Onlymessagethatareprocessedandacknowledgedwillbesynchronizedtotherestoftheclusternodes.">Scenario 6.&nbsp;<span lang="en">When the receiver is processing one of the message from instance1 and it is shutdown. What will happen?<br>Only message that are processed and acknowledged will be synchronized to the rest of the cluster nodes.</span></h3><p><br></p><ol><li>Send 3 messages to rabbitmq@rabbitmq1 node.<br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="740" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_20-26-58.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_20-26-58.png?version=1&amp;modificationDate=1617280018000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236620" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_20-26-58.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></li><li>Debug at listener to handle first message.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="99" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_20-7-22.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_20-7-22.png?version=1&amp;modificationDate=1617278842000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236618" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_20-7-22.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li><li>Close rabbitmq1 container.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="244" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_20-25-13.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_20-25-13.png?version=1&amp;modificationDate=1617279913000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236619" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_20-25-13.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li><li>Find all the 3 messages are copied to rabbit@rabbit2 node.<br><br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="755" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_20-29-12.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_20-29-12.png?version=1&amp;modificationDate=1617280153000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236621" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_20-29-12.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></li><li>The receiver will get these messages.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="191" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-1_20-38-15.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-1_20-38-15.png?version=1&amp;modificationDate=1617280695000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236622" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-1_20-38-15.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><br></li></ol><h2 id="RabbitMQhighavailabilityanddisasterrecovery-5.ConfiguremultipleinstancesbyinstalledRabbitMQatsinglemachine"><strong>5.&nbsp;</strong><strong>Configure multiple instances by installed&nbsp;</strong><strong>RabbitMQ at single machine</strong><strong style="color: rgb(23,43,77);font-size: 14.0px;letter-spacing: 0.0px;">&nbsp;&nbsp;</strong></h2><ol><li class="tw-data-text tw-text-large XcVN5d tw-ta">Open rabbitmq server root directory and copy ‘sbin’ folder.<br><br><strong><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-5_16-47-50.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-5_16-47-50.png?version=1&amp;modificationDate=1617612472000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236669" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-5_16-47-50.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></strong></li><li><span>Open the rabbitmq-env.bat from sbin2 folder.</span><br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-5_16-52-41.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-5_16-52-41.png?version=1&amp;modificationDate=1617612762000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236672" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-5_16-52-41.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><br></li><li class="tw-data-text tw-text-large XcVN5d tw-ta">Update the rabbitmq environment variables.</li></ol><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="706" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-5_16-54-8.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-5_16-54-8.png?version=1&amp;modificationDate=1617612849000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236674" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-5_16-54-8.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">4. Find default rabbitmq base directory and copy to new instance’s directory.<br><br><strong><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-5_16-55-57.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-5_16-55-57.png?version=1&amp;modificationDate=1617612959000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236676" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-5_16-55-57.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></strong></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;"><span>5. Update the new instance’s configuration.</span><br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="709" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-5_16-56-39.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-5_16-56-39.png?version=1&amp;modificationDate=1617613000000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236677" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-5_16-56-39.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">6. Go to your ‘sbin2’ folder to install rabbitmq service.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="778" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-5_16-57-8.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-5_16-57-8.png?version=1&amp;modificationDate=1617613030000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236678" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-5_16-57-8.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">7. Open services to check.<br><br><strong><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="703" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-5_16-58-40.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-5_16-58-40.png?version=1&amp;modificationDate=1617613122000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236679" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-5_16-58-40.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></strong></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;"><span>8. Go to sbin2 folder to execute below commands to let instance2 join cluster.</span><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-5_17-0-3.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-5_17-0-3.png?version=1&amp;modificationDate=1617613205000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236680" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-5_17-0-3.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">9. Go to sbin folder to set ha policy for instance1.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-5_17-12-1.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-5_17-12-1.png?version=1&amp;modificationDate=1617613922000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236681" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-5_17-12-1.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><h2 id="RabbitMQhighavailabilityanddisasterrecovery-6.TestingforRabbitMQmultiplenodes(Cluster)withmanualsynchronization"><strong>6.&nbsp;</strong><strong>Testing for RabbitMQ multiple nodes (Cluster) with&nbsp;</strong><strong>manual&nbsp;</strong><strong>synchronization</strong></h2><ol><li class="tw-data-text tw-text-large XcVN5d tw-ta"><span>Set my_ha policy to manual mode at rabbitmq web management</span>.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="851" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-6_14-42-12.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-6_14-42-12.png?version=1&amp;modificationDate=1617691335000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236717" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-6_14-42-12.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><br><br></li><li><p class="auto-cursor-target">Send 3 messages to instance1 and can see the unsynchronized information at table.</p><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="708" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-6_15-18-11.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-6_15-18-11.png?version=1&amp;modificationDate=1617693494000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236720" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-6_15-18-11.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p></li><li>Synchronize queue&nbsp;manually</li></ol><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-6_15-27-37.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-6_15-27-37.png?version=1&amp;modificationDate=1617694060000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236722" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-6_15-27-37.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">4. The queue already be synchronized.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="750" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-6_15-31-43.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-6_15-31-43.png?version=1&amp;modificationDate=1617694305000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236725" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-6_15-31-43.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">5.Then if we continue to send messages to Instance1 graph_data_queue, it will be auto&nbsp;synchronised.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="790" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-6_15-45-38.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-6_15-45-38.png?version=1&amp;modificationDate=1617695141000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236727" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-6_15-45-38.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">6.If want to cancel auto&nbsp;sync, we can execute this command</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-6_15-52-7.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-6_15-52-7.png?version=1&amp;modificationDate=1617695529000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236728" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-6_15-52-7.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">7. Then if we continue to send messages, the queue will need to sync manually.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="95" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-6_16-0-32.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-6_16-0-32.png?version=1&amp;modificationDate=1617696035000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236733" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-6_16-0-32.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><h2 id="RabbitMQhighavailabilityanddisasterrecovery-7.RabbitMQTime-To-LiveandExpiration"><strong>7.&nbsp;</strong><strong>RabbitMQ Time-To-Live and Expiration</strong></h2><p><br></p><ol><li class="tw-data-text tw-text-large XcVN5d tw-ta"><span>We can define queue ttl by the below code</span><br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="763" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-6_16-47-12.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-6_16-47-12.png?version=1&amp;modificationDate=1617698835000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236743" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-6_16-47-12.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><br><br></li><li><p class="auto-cursor-target">After queue generate, we can see the ttl information at web management. And this feature can help us to auto delete expire message.</p><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="759" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-6_16-48-49.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-6_16-48-49.png?version=1&amp;modificationDate=1617698932000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236744" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-6_16-48-49.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p></li><li>If want to set ttl for all queues, can use below command to set policy.<div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeHeader panelHeader pdl" style="border-bottom-width: 1px;"><b>Windows</b></div><div class="codeContent panelContent pdl">
<div><div id="highlighter_163901" class="syntaxhighlighter sh-confluence nogutter  powershell"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="powershell plain">rabbitmqctl set_policy TTL </code><code class="powershell string">".*"</code> <code class="powershell string">"{"</code><code class="powershell string">"message-ttl"</code><code class="powershell string">":60000}"</code> <code class="powershell plain">-</code><code class="powershell keyword">-apply</code><code class="powershell keyword">-to</code> <code class="powershell plain">queues</code></div></div></td></tr></tbody></table></div></div>
</div></div></li></ol><h2 id="RabbitMQhighavailabilityanddisasterrecovery-8.RabbitMQBackupandRestore"><strong>8.&nbsp;</strong><strong>RabbitMQ Backup and Restore</strong></h2><p>A data directory of Rabbitmq contains two types of data: definitions (metadata, schema/topology) and message store data.</p><p>Definitions can be exported and imported as json files.</p><p>Messages are stored in subdirectories of the node's data directory.</p><p><br></p><h3 id="RabbitMQhighavailabilityanddisasterrecovery-Definitions:">Definitions:</h3><p>We can export and import definitions by web management directly.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="774" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-7_13-36-46.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-7_13-36-46.png?version=1&amp;modificationDate=1617773810000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236764" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-7_13-36-46.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p>Or can use below commands to export and import.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="110" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-7_13-39-31.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-7_13-39-31.png?version=1&amp;modificationDate=1617773975000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236765" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-7_13-39-31.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="123" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-7_13-40-24.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-7_13-40-24.png?version=1&amp;modificationDate=1617774027000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236766" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-7_13-40-24.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><h3 id="RabbitMQhighavailabilityanddisasterrecovery-Messages:">Messages:</h3><p><span style="color: rgb(0,0,0);">To back up messages on a node it<span>&nbsp;</span></span>must be first stopped<span style="color: rgb(0,0,0);">.</span></p><p><span style="color: rgb(0,0,0);">In the case of a cluster with<span>&nbsp;mirrored queue</span>, we need to stop the entire cluster to take a backup.</span></p><p><br></p><p><span style="color: rgb(0,0,0);">Default Linux data directory:</span></p><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="54" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-7_14-19-48.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-7_14-19-48.png?version=1&amp;modificationDate=1617776392000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236768" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-7_14-19-48.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></span></p><p><br></p><p><span style="color: rgb(0,0,0);">Default Windows data directory:</span></p><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="97" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-7_14-24-57.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-7_14-24-57.png?version=1&amp;modificationDate=1617776701000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236769" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-7_14-24-57.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></span></p><p><br></p><p><span style="color: rgb(0,0,0);">We can import and export rabbitmq messages from data directory directly.&nbsp;</span></p><p><span style="color: rgb(0,0,0);"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-7_14-41-11.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-7_14-41-11.png?version=1&amp;modificationDate=1617777674000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236771" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-7_14-41-11.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></span></p><p><span style="color: rgb(0,0,0);">After we restore from a definition backup, the cluster name will be changed. We can use following command or update on the web management directly.</span></p><pre class="lang-sh">rabbitmqctl rename_cluster_node &lt;oldnode&gt; &lt;newnode&gt;</pre><p><br></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="860" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-20_15-1-16.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-20_15-1-16.png?version=1&amp;modificationDate=1618902079000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237107" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-20_15-1-16.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p><br></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-20_15-3-38.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-20_15-3-38.png?version=1&amp;modificationDate=1618902221000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237108" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-20_15-3-38.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><h2 id="RabbitMQhighavailabilityanddisasterrecovery-9.RabbitMQShovelPlugin"><strong>9.&nbsp;</strong><strong>RabbitMQ Shovel Plugin</strong></h2><h3 style="margin-left: 30.0px;" id="RabbitMQhighavailabilityanddisasterrecovery-Theshovelplugincanhelpusreliablyandcontinuallymovemessagesfromasourceinoneclustertoadestinationinanothercluster.">The shovel plugin can help us reliably and continually move messages from a source in one cluster to a destination in another cluster.</h3><h3 style="margin-left: 30.0px;" id="RabbitMQhighavailabilityanddisasterrecovery-Ifwewantthemessagesbeforwardedtoqueuesinotherlocations">If we want the messages be forwarded to queues in other locations</h3><ol><li class="tw-data-text tw-text-large XcVN5d tw-ta"><span>Create a new rabbitmq instance3 and join to another cluster</span>.<br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="715" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-13_11-37-12.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-13_11-37-12.png?version=1&amp;modificationDate=1618285032000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236880" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-13_11-37-12.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="57" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_16-59-43.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_16-59-43.png?version=1&amp;modificationDate=1618217983000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236860" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_16-59-43.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></li><li><p class="auto-cursor-target">Send 3 messages to instance1. And now there is no messages at instance3.</p><p class="auto-cursor-target"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="749" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_17-2-4.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_17-2-4.png?version=1&amp;modificationDate=1618218124000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236862" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_17-2-4.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="748" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_17-1-36.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_17-1-36.png?version=1&amp;modificationDate=1618218096000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236861" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_17-1-36.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></li><li>Enable shovel plugin at instance1.</li></ol><p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rabbitmq-plugins enable rabbitmq_shovel<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rabbitmq-plugins enable rabbitmq_shovel_management</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="765" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_17-2-59.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_17-2-59.png?version=1&amp;modificationDate=1618218179000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236863" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_17-2-59.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">4. Create a new shovel at web management.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="769" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_17-6-38.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_17-6-38.png?version=1&amp;modificationDate=1618218398000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236864" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_17-6-38.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="771" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_17-7-24.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_17-7-24.png?version=1&amp;modificationDate=1618218444000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236865" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_17-7-24.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">5. All the messages at instance1 already be forwarded to instance3.&nbsp;<span lang="en">Even if we continue to send message to instance1, it will be forwarded to instance3&nbsp;automatically.</span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="809" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_17-11-16.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_17-11-16.png?version=1&amp;modificationDate=1618218676000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236866" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_17-11-16.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="810" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_17-11-44.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_17-11-44.png?version=1&amp;modificationDate=1618218704000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236867" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_17-11-44.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">6. If we want to configure static shovels, we can open the rabbitmq.config.example file and copy it's shovel configuration to the rabbitmq.config file.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="731" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_17-15-11.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_17-15-11.png?version=1&amp;modificationDate=1618218911000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236869" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_17-15-11.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="717" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-12_17-17-2.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-12_17-17-2.png?version=1&amp;modificationDate=1618219022000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236870" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-12_17-17-2.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">7. If I update the rabbitmq.config file as below,&nbsp; we can see the created shovel when start rabbitmq server.</p><p style="margin-left: 30.0px;"><br></p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_767671" class="syntaxhighlighter sh-confluence nogutter  java"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">{rabbitmq_shovel, [</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{shovels, [</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{my_static_shovel, [</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{sources, [</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{brokers, [</code><code class="java string">"amqp://guest:guest@127.0.0.1:5672"</code><code class="java plain">]},</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{declarations, [</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'queue.declare'</code><code class="java plain">, [ {queue, &lt;&lt;</code><code class="java string">"graph_data_queue"</code><code class="java plain">&gt;&gt;}, durable]}, </code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'exchange.declare'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {type, &lt;&lt;</code><code class="java string">"topic"</code><code class="java plain">&gt;&gt;}, durable]}, </code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'queue.bind'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {queue, &lt;&lt;</code><code class="java string">"graph_data_queue"</code><code class="java plain">&gt;&gt;}, {routing_key, &lt;&lt;</code><code class="java string">"graph_data_queue"</code><code class="java plain">&gt;&gt;} ]}&nbsp; </code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]}</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]},</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{destinations, [</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{brokers, [</code><code class="java string">"amqp://guest:guest@127.0.0.1:5676"</code><code class="java plain">]},</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{declarations, [</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'queue.declare'</code><code class="java plain">, [ {queue, &lt;&lt;</code><code class="java string">"graph_data_queue"</code><code class="java plain">&gt;&gt;}, durable]}, </code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'exchange.declare'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {type, &lt;&lt;</code><code class="java string">"topic"</code><code class="java plain">&gt;&gt;}, durable]}, </code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'queue.bind'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {queue, &lt;&lt;</code><code class="java string">"graph_data_queue"</code><code class="java plain">&gt;&gt;}, {routing_key, &lt;&lt;</code><code class="java string">"graph_data_queue"</code><code class="java plain">&gt;&gt;} ]}</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]}&nbsp; </code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]},</code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{queue, &lt;&lt;</code><code class="java string">"graph_data_queue"</code><code class="java plain">&gt;&gt;}</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]} </code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]}</code></div><div class="line number23 index22 alt2"><code class="java plain">]}</code></div></div></td></tr></tbody></table></div></div>
</div></div><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="803" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-14_9-44-9.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-14_9-44-9.png?version=1&amp;modificationDate=1618364648000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236907" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-14_9-44-9.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="807" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-14_9-45-7.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-14_9-45-7.png?version=1&amp;modificationDate=1618364706000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236909" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-14_9-45-7.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p><br></p><h3 style="margin-left: 30.0px;" id="RabbitMQhighavailabilityanddisasterrecovery-Ifwewantthemessagesbereplicatedtoexchangesinotherlocations">If we want the messages be replicated to exchanges in other locations</h3><h3 style="margin-left: 30.0px;" id="RabbitMQhighavailabilityanddisasterrecovery-">&nbsp;</h3><p style="margin-left: 30.0px;">1. When we create shovel, we need to select Exchange option.&nbsp;</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-13_11-25-50.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-13_11-25-50.png?version=1&amp;modificationDate=1618284351000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236875" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-13_11-25-50.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">2. If the creation is successful, we will see a new binging at exchange page.&nbsp;</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="688" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-14_18-12-0.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-14_18-12-0.png?version=1&amp;modificationDate=1618395120000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236934" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-14_18-12-0.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">3. It will bind to a new queue generate automatically<span lang="en">. Shovel plugin will create a consumer for forwarding messages at this queue. So that the messages from original queue will be remained.</span></p><p style="margin-left: 30.0px;"><span lang="en"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="749" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-14_18-59-26.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-14_18-59-26.png?version=1&amp;modificationDate=1618397966000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236938" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-14_18-59-26.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="166" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-14_18-58-57.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-14_18-58-57.png?version=1&amp;modificationDate=1618397937000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236937" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-14_18-58-57.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">4. Now&nbsp;<span lang="en">if we send message to instance1, it will be replicated to instance3&nbsp;automatically.</span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="626" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-13_11-31-6.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-13_11-31-6.png?version=1&amp;modificationDate=1618284666000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236877" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-13_11-31-6.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="635" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-13_11-31-54.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-13_11-31-54.png?version=1&amp;modificationDate=1618284714000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236878" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-13_11-31-54.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">5. If we want to create a static shovel for exchange, we can use below configuration<span lang="en">.</span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="400" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-14_17-42-20.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-14_17-42-20.png?version=1&amp;modificationDate=1618393339000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236932" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-14_17-42-20.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_336853" class="syntaxhighlighter sh-confluence nogutter  java"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">{rabbitmq_shovel, [</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{shovels, [</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{my_static_shovel, [</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{sources, [</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{brokers, [</code><code class="java string">"amqp://guest:guest@127.0.0.1:5672"</code><code class="java plain">]},</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{declarations, [</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'queue.declare'</code><code class="java plain">, [ {queue, &lt;&lt;&gt;&gt;}, durable]}, </code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'exchange.declare'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {type, &lt;&lt;</code><code class="java string">"topic"</code><code class="java plain">&gt;&gt;}, durable]}, </code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'queue.bind'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {queue, &lt;&lt;&gt;&gt;}, {routing_key, &lt;&lt;</code><code class="java string">"graph_data_queue"</code><code class="java plain">&gt;&gt;} ]}&nbsp; </code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]}</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]},</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{destinations, [</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{brokers, [</code><code class="java string">"amqp://guest:guest@127.0.0.1:5676"</code><code class="java plain">]},</code></div><div class="line number14 index13 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{declarations, [</code></div><div class="line number15 index14 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'exchange.declare'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {type, &lt;&lt;</code><code class="java string">"topic"</code><code class="java plain">&gt;&gt;}, durable]}</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]}&nbsp; </code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]},</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{queue, &lt;&lt;&gt;&gt;}</code></div><div class="line number19 index18 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]} </code></div><div class="line number20 index19 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]}</code></div><div class="line number21 index20 alt2"><code class="java plain">]}</code></div></div></td></tr></tbody></table></div></div>
</div></div><p><br></p><p style="margin-left: 30.0px;">5. This configuration will <span style="color: rgb(0,37,62);">declare an anonymous queue and bind to our exchange</span><span lang="en">. So that the forwarded messages only from&nbsp;<span style="color: rgb(0,37,62);">anonymous queue. The messages from&nbsp;graph_data_queue still be remained at source location.</span></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="688" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-14_18-12-0.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-14_18-12-0.png?version=1&amp;modificationDate=1618395120000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236934" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-14_18-12-0.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="771" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-14_18-12-42.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-14_18-12-42.png?version=1&amp;modificationDate=1618395162000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236935" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-14_18-12-42.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p><br></p><h2 id="RabbitMQhighavailabilityanddisasterrecovery-10.RabbitMQFederationPlugin"><strong>10.&nbsp;</strong><strong>RabbitMQ Federation Plugin</strong></h2><p style="margin-left: 30.0px;">The federation plugin can transmit messages between brokers (or clusters) in different administrative domains</p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">1. Enable federation plugin at instance1 and instance3 .&nbsp;<span style="color: rgb(0,0,0);">When using a federation in a cluster, all the nodes of the cluster should have the federation plugin enabled.</span></p><p style="margin-left: 30.0px;">rabbitmq-plugins enable rabbitmq_federation</p><p style="margin-left: 30.0px;">rabbitmq-plugins enable rabbitmq_federation_management</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="720" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_15-5-41.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_15-5-41.png?version=1&amp;modificationDate=1618470341000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236975" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_15-5-41.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="720" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_15-6-10.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_15-6-10.png?version=1&amp;modificationDate=1618470370000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236976" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_15-6-10.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">2. Create a new upstream at instance3.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="796" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_16-19-37.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_16-19-37.png?version=1&amp;modificationDate=1618474777000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236989" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_16-19-37.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">3. Create a new policy for the upstream<span lang="en">.</span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="745" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_16-17-45.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_16-17-45.png?version=1&amp;modificationDate=1618474665000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236987" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_16-17-45.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">4. If the creation is successful, we can see the running links at Federation Status page.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="777" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_16-20-19.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_16-20-19.png?version=1&amp;modificationDate=1618474819000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236990" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_16-20-19.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">5. Then we go to check instance1. At exchange page ,we can find a auto generated exchange about federation .</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="250" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_16-34-1.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_16-34-1.png?version=1&amp;modificationDate=1618475641000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236991" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_16-34-1.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="845" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_16-36-16.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_16-36-16.png?version=1&amp;modificationDate=1618475776000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236992" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_16-36-16.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">6. At queue page ,we also can find a auto generated queue about federation . And we can find the consumer at this queue.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="839" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_16-39-55.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_16-39-55.png?version=1&amp;modificationDate=1618475995000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236993" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_16-39-55.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="850" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_16-40-41.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_16-40-41.png?version=1&amp;modificationDate=1618476041000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236994" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_16-40-41.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">7. Then if we send a message to instance1, it will be auto replicated to instance3.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="827" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-15_16-45-32.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-15_16-45-32.png?version=1&amp;modificationDate=1618476332000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187236995" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-15_16-45-32.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><h2 id="RabbitMQhighavailabilityanddisasterrecovery-11.SecuringClusterandCLIToolCommunicationwithTLS"><strong>11.&nbsp;</strong><strong>Securing Cluster and CLI Tool Communication with TLS</strong></h2><p style="margin-left: 30.0px;">Before test TLS for CLI tools, we need to create certificate at local machine. For development and experimentation, we can use OpenSSL to generate quickly.</p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">1. Create a new folder to generate root key.</p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_600635" class="syntaxhighlighter sh-confluence nogutter  java"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">openssl genrsa -out rootCA.key </code><code class="java value">2048</code></div><div class="line number2 index1 alt1"><code class="java plain">openssl req -x509 -</code><code class="java keyword">new</code> <code class="java plain">-nodes -key rootCA.key -sha256 -days </code><code class="java value">3650</code> <code class="java plain">-out rootCA.pem</code></div></div></td></tr></tbody></table></div></div>
</div></div><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="778" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-19_10-32-4.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-19_10-32-4.png?version=1&amp;modificationDate=1618799526000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237027" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-19_10-32-4.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="145" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-19_10-55-33.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-19_10-55-33.png?version=1&amp;modificationDate=1618800934000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237031" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-19_10-55-33.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">2. Generate certificate for server. We need to make the certificate common name same as the server host name.</p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="803" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-23_17-16-41.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-23_17-16-41.png?version=1&amp;modificationDate=1619169409000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237320" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-23_17-16-41.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="142" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-19_11-3-0.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-19_11-3-0.png?version=1&amp;modificationDate=1618801381000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237034" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-19_11-3-0.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">3. Generate certificate for client.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="784" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-19_11-17-11.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-19_11-17-11.png?version=1&amp;modificationDate=1618802233000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237038" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-19_11-17-11.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="148" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-19_11-17-35.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-19_11-17-35.png?version=1&amp;modificationDate=1618802257000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237039" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-19_11-17-35.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">4. Enable rabbitmq_auth_mechanism_ssl plugin for each node.</p><p style="margin-left: 30.0px;">rabbitmq-plugins enable rabbitmq_auth_mechanism_ssl</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="778" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-19_17-53-12.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-19_17-53-12.png?version=1&amp;modificationDate=1618825994000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237079" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-19_17-53-12.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">5. Update the rabbitmq.config to support ssl.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="742" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-19_17-55-39.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-19_17-55-39.png?version=1&amp;modificationDate=1618826141000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237080" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-19_17-55-39.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_987126" class="syntaxhighlighter sh-confluence nogutter  java"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">{rabbit, [</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">{tcp_listeners, [</code><code class="java value">5676</code><code class="java plain">]},</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">{ssl_listeners, [</code><code class="java value">5675</code><code class="java plain">]},</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">{ssl_options, [{cacertfile,</code><code class="java string">"d:\\my_test\\AmsConnect\\rootCA\\rootCA.pem"</code><code class="java plain">},</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{certfile,</code><code class="java string">"d:\\my_test\\AmsConnect\\server\\myServer.crt"</code><code class="java plain">},</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{keyfile,</code><code class="java string">"d:\\my_test\\AmsConnect\\server\\myServer.key"</code><code class="java plain">},</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{verify,verify_peer},</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{fail_if_no_peer_cert,</code><code class="java keyword">true</code><code class="java plain">}</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]},</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">{auth_mechanisms, [</code><code class="java string">'PLAIN'</code><code class="java plain">, </code><code class="java string">'AMQPLAIN'</code><code class="java plain">,</code><code class="java string">'EXTERNAL'</code><code class="java plain">]},</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;</code><code class="java plain">{ssl_cert_login_from, common_name}</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;</code><code class="java plain">]}</code></div></div></td></tr></tbody></table></div></div>
</div></div><p style="margin-left: 30.0px;">5. If the configuration is successful, you can find the ssl listener at web management.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="746" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-19_18-1-39.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-19_18-1-39.png?version=1&amp;modificationDate=1618826501000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237083" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-19_18-1-39.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">6. Update the shovel configuration to connect ssl port.</p><p style="margin-left: 30.0px;"><br></p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;" data-hasbody="true" data-macro-name="code"><div class="codeContent panelContent pdl">
<div><div id="highlighter_470341" class="syntaxhighlighter sh-confluence nogutter  java"><div class="toolbar"><span><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container" title="Hint: double-click to select code"><div class="line number1 index0 alt2"><code class="java plain">{rabbit, [</code></div><div class="line number2 index1 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{tcp_listeners, [</code><code class="java value">5672</code><code class="java plain">]},</code></div><div class="line number3 index2 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{ssl_listeners, [</code><code class="java value">5671</code><code class="java plain">]},</code></div><div class="line number4 index3 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{ssl_options, [</code></div><div class="line number5 index4 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{cacertfile,</code><code class="java string">"d:\\my_test\\AmsConnect\\rootCA\\rootCA.pem"</code><code class="java plain">},</code></div><div class="line number6 index5 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{certfile,</code><code class="java string">"d:\\my_test\\AmsConnect\\server\\myServer.crt"</code><code class="java plain">},</code></div><div class="line number7 index6 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{keyfile,</code><code class="java string">"d:\\my_test\\AmsConnect\\server\\myServer.key"</code><code class="java plain">},</code></div><div class="line number8 index7 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{verify,verify_peer},</code></div><div class="line number9 index8 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{fail_if_no_peer_cert,</code><code class="java keyword">true</code><code class="java plain">}</code></div><div class="line number10 index9 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]},</code></div><div class="line number11 index10 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{auth_mechanisms, [</code><code class="java string">'PLAIN'</code><code class="java plain">, </code><code class="java string">'AMQPLAIN'</code><code class="java plain">, </code><code class="java string">'EXTERNAL'</code><code class="java plain">]},</code></div><div class="line number12 index11 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{ssl_cert_login_from, common_name}</code></div><div class="line number13 index12 alt2"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">]</code></div><div class="line number14 index13 alt1"><code class="java plain">},</code></div><div class="line number15 index14 alt2"><code class="java plain">{rabbitmq_management, [</code></div><div class="line number16 index15 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">{listener, [</code></div><div class="line number17 index16 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{port,</code><code class="java value">15672</code><code class="java plain">}</code></div><div class="line number18 index17 alt1"><code class="java spaces">&nbsp;&nbsp;</code><code class="java plain">]}</code></div><div class="line number19 index18 alt2"><code class="java plain">]},</code></div><div class="line number20 index19 alt1"><code class="java plain">{rabbitmq_shovel, [</code></div><div class="line number21 index20 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{shovels, [</code></div><div class="line number22 index21 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{my_static_shovel, [</code></div><div class="line number23 index22 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{sources, [</code></div><div class="line number24 index23 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{brokers, [</code><code class="java string">"amqps://localhost:5671?cacertfile=d://my_test//AmsConnect//rootCA//rootCA.pem&amp;certfile=d://my_test//AmsConnect//client//myClient.crt&amp;keyfile=d://my_test//AmsConnect//client//myClient.key&amp;verify=verify_peer&amp;fail_if_no_peer_cert=true&amp;auth_mechanism=external"</code><code class="java plain">]},</code></div><div class="line number25 index24 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{declarations, [</code></div><div class="line number26 index25 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'queue.declare'</code><code class="java plain">, [ {queue, &lt;&lt;&gt;&gt;}, durable]},</code></div><div class="line number27 index26 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'exchange.declare'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {type, &lt;&lt;</code><code class="java string">"topic"</code><code class="java plain">&gt;&gt;}, durable]},</code></div><div class="line number28 index27 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'queue.bind'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {queue, &lt;&lt;&gt;&gt;}, {routing_key, &lt;&lt;</code><code class="java string">"graph_data_queue"</code><code class="java plain">&gt;&gt;} ]} </code></div><div class="line number29 index28 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]}</code></div><div class="line number30 index29 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]},</code></div><div class="line number31 index30 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{destinations, [</code></div><div class="line number32 index31 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{brokers, [</code><code class="java string">"amqps://localhost:5673?cacertfile=d://my_test//AmsConnect//rootCA//rootCA.pem&amp;certfile=d://my_test//AmsConnect//client//myClient.crt&amp;keyfile=d://my_test//AmsConnect//client//myClient.key&amp;verify=verify_peer&amp;fail_if_no_peer_cert=true&amp;auth_mechanism=external"</code><code class="java plain">]},</code></div><div class="line number33 index32 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{declarations, [</code></div><div class="line number34 index33 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{</code><code class="java string">'exchange.declare'</code><code class="java plain">, [ {exchange, &lt;&lt;</code><code class="java string">"graph_data_exchange"</code><code class="java plain">&gt;&gt;}, {type, &lt;&lt;</code><code class="java string">"topic"</code><code class="java plain">&gt;&gt;}, durable]}</code></div><div class="line number35 index34 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]} </code></div><div class="line number36 index35 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]},</code></div><div class="line number37 index36 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">{queue, &lt;&lt;&gt;&gt;}</code></div><div class="line number38 index37 alt1"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]}</code></div><div class="line number39 index38 alt2"><code class="java spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="java plain">]}</code></div><div class="line number40 index39 alt1"><code class="java plain">]}</code></div></div></td></tr></tbody></table></div></div>
</div></div><p><br></p><p style="margin-left: 30.0px;">7. Now can check the sholve status at web management.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="844" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-19_18-11-57.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-19_18-11-57.png?version=1&amp;modificationDate=1618827119000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237088" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-19_18-11-57.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">8. Now I set the ssl_cert_login_from value to common_name, so I need to create a new acount at rabbitmq server which has the same name with certificate common name.</p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="703" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-20_9-59-57.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-20_9-59-57.png?version=1&amp;modificationDate=1618884000000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237090" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-20_9-59-57.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="242" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-20_10-2-50.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-20_10-2-50.png?version=1&amp;modificationDate=1618884173000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237091" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-20_10-2-50.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><h2 id="RabbitMQhighavailabilityanddisasterrecovery-12.RabbitMQHealthCheck"><strong>12.&nbsp;</strong><strong>RabbitMQ Health Check</strong></h2><p style="margin-left: 30.0px;">1.&nbsp;The most basic check ensures that the&nbsp;runtime&nbsp;is running and (indirectly) that CLI tools can&nbsp;authenticate&nbsp;with it.<span style="color: rgb(0,0,0);">.</span></p><p style="margin-left: 30.0px;"><span style="color: rgb(0,0,0);">rabbitmq-diagnostics -q ping</span></p><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="136" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-20_18-5-58.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-20_18-5-58.png?version=1&amp;modificationDate=1618913161000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237122" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-20_18-5-58.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">2.&nbsp;<span style="color: rgb(0,0,0);">This is a common way of sanity checking a node. The probability of false positives can be considered approaching<span>&nbsp;</span></span><span class="code" style="color: white;">0</span><span style="color: rgb(0,0,0);"><span>&nbsp;</span>except for upgrades and maintenance windows.</span></p><pre class="lang-bash hljs">    rabbitmq-diagnostics -q status</pre><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="816" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-20_18-8-38.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-20_18-8-38.png?version=1&amp;modificationDate=1618913321000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237123" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-20_18-8-38.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">3.&nbsp;Specifically for memory alarms and provides access to the same per category data and supports various units<span style="color: rgb(0,0,0);">.</span></p><pre class="lang-bash hljs">    rabbitmq-diagnostics -q memory_breakdown</pre><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="816" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-21_9-59-13.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-21_9-59-13.png?version=1&amp;modificationDate=1618970357000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237127" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-21_9-59-13.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p><br></p><p style="margin-left: 30.0px;">4.&nbsp;Generate a server status report containing a concatenation of all server status information for support purposes.</p><pre class="lang-bash hljs">    rabbitmq-diagnostics -q report</pre><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="869" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-21_10-13-35.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-21_10-13-35.png?version=1&amp;modificationDate=1618971219000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237129" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-21_10-13-35.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">5.&nbsp;Earlier versions of RabbitMQ provided a single opinionated and intrusive health check command.The above command is deprecated will be removed in a future version of RabbitMQ and is to be avoided</p><pre class="lang-bash hljs">    rabbitmq-diagnostics -q node_health_check</pre><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="804" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-21_10-16-41.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-21_10-16-41.png?version=1&amp;modificationDate=1618971404000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237132" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-21_10-16-41.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;"><br></p><p style="margin-left: 30.0px;">6. We can use&nbsp;rabbitmq-diagnostics help command to p<span style="color: rgb(0,0,0);">rint usage for all available commands. If need more details about the command can refer to the following article.</span></p><p style="margin-left: 30.0px;"><span><a href="https://www.rabbitmq.com/rabbitmq-diagnostics.8.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/rabbitmq-diagnostics.8.html</a></span></p><pre class="lang-bash hljs">    rabbitmq-diagnostics help</pre><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="828" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-21_10-25-22.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-21_10-25-22.png?version=1&amp;modificationDate=1618971926000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237134" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-21_10-25-22.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><p style="margin-left: 30.0px;">7. If we want to access the rabbitmq http api we can refer to the following article.</p><p style="margin-left: 30.0px;"><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html" class="external-link" rel="nofollow">https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html</a></p><pre class="tw-data-text tw-text-large XcVN5d tw-ta"><span class="Y2IQFc" lang="en">        We can also perform health checks directly through http api</span></pre><p style="margin-left: 30.0px;"><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="117" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-23_11-38-32.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-23_11-38-32.png?version=1&amp;modificationDate=1619149123000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237315" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-23_11-38-32.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span></p><div class="table-wrap"><table class="wrapped confluenceTable tablesorter tablesorter-default stickyTableHeaders" role="grid" resolved="" style="padding: 0px;"><colgroup><col><col><col><col><col><col></colgroup><thead class="tableFloatingHeaderOriginal"><tr role="row" class="tablesorter-headerRow"><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="0" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="GET: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">GET</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="1" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="PUT: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">PUT</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="2" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="DELETE: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">DELETE</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="3" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="POST: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">POST</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="4" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="Path: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">Path</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="5" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="Description: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">Description</div></th></tr></thead><thead class="tableFloatingHeader" style="display: none;"><tr role="row" class="tablesorter-headerRow"><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="0" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="GET: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">GET</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="1" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="PUT: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">PUT</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="2" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="DELETE: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">DELETE</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="3" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="POST: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">POST</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="4" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="Path: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">Path</div></th><th class="confluenceTh tablesorter-header sortableHeader tablesorter-headerUnSorted" data-column="5" tabindex="0" scope="col" role="columnheader" aria-disabled="false" unselectable="on" aria-sort="none" aria-label="Description: No sort applied, activate to apply an ascending sort" style="user-select: none;"><div class="tablesorter-header-inner">Description</div></th></tr></thead><tbody aria-live="polite" aria-relevant="all"><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/overview</td><td class="confluenceTd">Various random bits of information that describe the whole system.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/cluster-name</td><td class="confluenceTd">Name identifying this RabbitMQ cluster.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/nodes</td><td class="confluenceTd">A list of nodes in the RabbitMQ cluster.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/nodes/<em>name</em></td><td class="confluenceTd">An individual node in the RabbitMQ cluster. Add "?memory=true" to get memory statistics, and "?binary=true" to get a breakdown of binary memory use (may be expensive if there are many small binaries in the system).</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/extensions</td><td class="confluenceTd">A list of extensions to the management plugin.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/definitions<br>/api/all-configuration<span>&nbsp;</span><em>(deprecated)</em></td><td class="confluenceTd">The server definitions - exchanges, queues, bindings, users, virtual hosts, permissions, topic permissions, and parameters. Everything apart from messages. POST to upload an existing set of definitions. Note that:<ul><li>The definitions are merged. Anything already existing on the server but not in the uploaded definitions is untouched.</li><li>Conflicting definitions on immutable objects (exchanges, queues and bindings) will be ignored. The existing definition will be preserved.</li><li>Conflicting definitions on mutable objects will cause the object in the server to be overwritten with the object from the definitions.</li><li>In the event of an error you will be left with a part-applied set of definitions.</li></ul>For convenience you may upload a file from a browser to this URI (i.e. you can use<span>&nbsp;</span><code>multipart/form-data</code><span>&nbsp;</span>as well as<span>&nbsp;</span><code>application/json</code>) in which case the definitions should be uploaded as a form field named "file".</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/definitions/<em>vhost</em></td><td class="confluenceTd">The server definitions for a given virtual host - exchanges, queues, bindings and policies. POST to upload an existing set of definitions. Note that:<ul><li>The definitions are merged. Anything already existing on the server but not in the uploaded definitions is untouched.</li><li>Conflicting definitions on immutable objects (exchanges, queues and bindings) will be ignored. The existing definition will be preserved.</li><li>Conflicting definitions on mutable objects will cause the object in the server to be overwritten with the object from the definitions.</li><li>In the event of an error you will be left with a part-applied set of definitions.</li></ul>For convenience you may upload a file from a browser to this URI (i.e. you can use<span>&nbsp;</span><code>multipart/form-data</code><span>&nbsp;</span>as well as<span>&nbsp;</span><code>application/json</code>) in which case the definitions should be uploaded as a form field named "file".</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/connections</td><td class="confluenceTd">A list of all open connections. Use<span>&nbsp;</span><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html#pagination" class="external-link" rel="nofollow">pagination parameters</a><span>&nbsp;</span>to filter connections.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/vhosts/<em>vhost</em>/connections</td><td class="confluenceTd">A list of all open connections in a specific virtual host. Use<span>&nbsp;</span><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html#pagination" class="external-link" rel="nofollow">pagination parameters</a><span>&nbsp;</span>to filter connections.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/connections/<em>name</em></td><td class="confluenceTd">An individual connection. DELETEing it will close the connection. Optionally set the "X-Reason" header when DELETEing to provide a reason.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/connections/<em>name</em>/channels</td><td class="confluenceTd">List of all channels for a given connection.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/channels</td><td class="confluenceTd">A list of all open channels. Use<span>&nbsp;</span><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html#pagination" class="external-link" rel="nofollow">pagination parameters</a><span>&nbsp;</span>to filter channels.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/vhosts/<em>vhost</em>/channels</td><td class="confluenceTd">A list of all open channels in a specific virtual host. Use<span>&nbsp;</span><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html#pagination" class="external-link" rel="nofollow">pagination parameters</a><span>&nbsp;</span>to filter channels.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/channels/<em>channel</em></td><td class="confluenceTd">Details about an individual channel.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/consumers</td><td class="confluenceTd">A list of all consumers.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/consumers/<em>vhost</em></td><td class="confluenceTd">A list of all consumers in a given virtual host.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/exchanges</td><td class="confluenceTd">A list of all exchanges. Use<span>&nbsp;</span><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html#pagination" class="external-link" rel="nofollow">pagination parameters</a><span>&nbsp;</span>to filter exchanges.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/exchanges/<em>vhost</em></td><td class="confluenceTd">A list of all exchanges in a given virtual host. Use<span>&nbsp;</span><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html#pagination" class="external-link" rel="nofollow">pagination parameters</a><span>&nbsp;</span>to filter exchanges.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/exchanges/<em>vhost</em>/<em>name</em></td><td class="confluenceTd">An individual exchange. To PUT an exchange, you will need a body looking something like this:<pre>{"type":"direct","auto_delete":false,"durable":true,"internal":false,"arguments":{}}</pre>The<span>&nbsp;</span><code>type</code><span>&nbsp;</span>key is mandatory; other keys are optional.<p>When DELETEing an exchange you can add the query string parameter<span>&nbsp;</span><code>if-unused=true</code>. This prevents the delete from succeeding if the exchange is bound to a queue or as a source to another exchange.</p></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/exchanges/<em>vhost</em>/<em>name</em>/bindings/source</td><td class="confluenceTd">A list of all bindings in which a given exchange is the source.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/exchanges/<em>vhost</em>/<em>name</em>/bindings/destination</td><td class="confluenceTd">A list of all bindings in which a given exchange is the destination.</td></tr><tr role="row"><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/exchanges/<em>vhost</em>/<em>name</em>/publish</td><td class="confluenceTd">Publish a message to a given exchange. You will need a body looking something like:<pre>{"properties":{},"routing_key":"my key","payload":"my body","payload_encoding":"string"}</pre>All keys are mandatory. The<span>&nbsp;</span><code>payload_encoding</code><span>&nbsp;</span>key should be either "string" (in which case the payload will be taken to be the UTF-8 encoding of the payload field) or "base64" (in which case the payload field is taken to be base64 encoded).<br>If the message is published successfully, the response will look like:<pre>{"routed": true}</pre><code>routed</code><span>&nbsp;</span>will be true if the message was sent to at least one queue.<p>Please note that the HTTP API is not ideal for high performance publishing; the need to create a new TCP connection for each message published can limit message throughput compared to AMQP or other protocols using long-lived connections.</p></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/queues</td><td class="confluenceTd">A list of all queues. Use<span>&nbsp;</span><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html#pagination" class="external-link" rel="nofollow">pagination parameters</a><span>&nbsp;</span>to filter queues.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/queues/<em>vhost</em></td><td class="confluenceTd">A list of all queues in a given virtual host. Use<span>&nbsp;</span><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html#pagination" class="external-link" rel="nofollow">pagination parameters</a><span>&nbsp;</span>to filter queues.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/queues/<em>vhost</em>/<em>name</em></td><td class="confluenceTd">An individual queue. To PUT a queue, you will need a body looking something like this:<pre>{"auto_delete":false,"durable":true,"arguments":{},"node":"rabbit@smacmullen"}</pre>All keys are optional.<p>When DELETEing a queue you can add the query string parameters<span>&nbsp;</span><code>if-empty=true</code><span>&nbsp;</span>and / or<span>&nbsp;</span><code>if-unused=true</code>. These prevent the delete from succeeding if the queue contains messages, or has consumers, respectively.</p></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/queues/<em>vhost</em>/<em>name</em>/bindings</td><td class="confluenceTd">A list of all bindings on a given queue.</td></tr><tr role="row"><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/queues/<em>vhost</em>/<em>name</em>/contents</td><td class="confluenceTd">Contents of a queue. DELETE to purge. Note you can't GET this.</td></tr><tr role="row"><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/queues/<em>vhost</em>/<em>name</em>/actions</td><td class="confluenceTd">Actions that can be taken on a queue. POST a body like:<pre>{"action":"sync"}</pre>Currently the actions which are supported are<span>&nbsp;</span><code>sync</code><span>&nbsp;</span>and<span>&nbsp;</span><code>cancel_sync</code>.</td></tr><tr role="row"><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/queues/<em>vhost</em>/<em>name</em>/get</td><td class="confluenceTd">Get messages from a queue. (This is not an HTTP GET as it will alter the state of the queue.) You should post a body looking like:<pre>{"count":5,"ackmode":"ack_requeue_true","encoding":"auto","truncate":50000}</pre><ul><li><code>count</code><span>&nbsp;</span>controls the maximum number of messages to get. You may get fewer messages than this if the queue cannot immediately provide them.</li><li><code>ackmode</code><span>&nbsp;</span>determines whether the messages will be removed from the queue. If ackmode is ack_requeue_true or reject_requeue_true they will be requeued - if ackmode is ack_requeue_false or reject_requeue_false they will be removed.</li><li><code>encoding</code><span>&nbsp;</span>must be either "auto" (in which case the payload will be returned as a string if it is valid UTF-8, and base64 encoded otherwise), or "base64" (in which case the payload will always be base64 encoded).</li><li>If<span>&nbsp;</span><code>truncate</code><span>&nbsp;</span>is present it will truncate the message payload if it is larger than the size given (in bytes).</li></ul><p><code>truncate</code><span>&nbsp;</span>is optional; all other keys are mandatory.</p><p>Please note that the get path in the HTTP API is intended for diagnostics etc - it does not implement reliable delivery and so should be treated as a sysadmin's tool rather than a general API for messaging.</p></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/bindings</td><td class="confluenceTd">A list of all bindings.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/bindings/<em>vhost</em></td><td class="confluenceTd">A list of all bindings in a given virtual host.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/bindings/<em>vhost</em>/e/<em>exchange</em>/q/<em>queue</em></td><td class="confluenceTd"><p>A list of all bindings between an exchange and a queue. Remember, an exchange and a queue can be bound together many times!</p><p>To create a new binding, POST to this URI. Request body should be a JSON object optionally containing two fields,<span>&nbsp;</span><code>routing_key</code><span>&nbsp;</span>(a string) and<span>&nbsp;</span><code>arguments</code><span>&nbsp;</span>(a map of optional arguments):</p><pre>{"routing_key":"my_routing_key", "arguments":{"x-arg": "value"}}</pre>All keys are optional. The response will contain a<span>&nbsp;</span><code>Location</code><span>&nbsp;</span>header telling you the URI of your new binding.<p><br></p></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/bindings/<em>vhost</em>/e/<em>exchange</em>/q/<em>queue</em>/<em>props</em></td><td class="confluenceTd">An individual binding between an exchange and a queue. The<span>&nbsp;</span><em>props</em><span>&nbsp;</span>part of the URI is a "name" for the binding composed of its routing key and a hash of its arguments.<span>&nbsp;</span><em>props</em><span>&nbsp;</span>is the field named "properties_key" from a bindings listing response.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/bindings/<em>vhost</em>/e/<em>source</em>/e/<em>destination</em></td><td class="confluenceTd"><p>A list of all bindings between two exchanges, similar to the list of all bindings between an exchange and a queue, above.</p><p><br></p><p>To create a new binding, POST to this URI. Request body should be a JSON object optionally containing two fields,<span>&nbsp;</span><code>routing_key</code><span>&nbsp;</span>(a string) and<span>&nbsp;</span><code>arguments</code><span>&nbsp;</span>(a map of optional arguments):</p><pre>{"routing_key":"my_routing_key", "arguments":{"x-arg": "value"}}</pre>All keys are optional. The response will contain a<span>&nbsp;</span><code>Location</code><span>&nbsp;</span>header telling you the URI of your new binding.<p><br></p><p><br></p></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/bindings/<em>vhost</em>/e/<em>source</em>/e/<em>destination</em>/<em>props</em></td><td class="confluenceTd">An individual binding between two exchanges. Similar to the individual binding between an exchange and a queue, above.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/vhosts</td><td class="confluenceTd">A list of all vhosts.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/vhosts/<em>name</em></td><td class="confluenceTd">An individual virtual host. As a virtual host usually only has a name, you do not need an HTTP body when PUTing one of these. To set metadata on creation, provide a body like the following:<pre>{"description":"virtual host description", "tags":"accounts,production"}</pre><code>tags</code><span>&nbsp;</span>is a comma-separated list of tags. These metadata fields are optional. To enable / disable tracing, provide a body looking like:<pre>{"tracing":true}</pre></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/vhosts/<em>name</em>/permissions</td><td class="confluenceTd">A list of all permissions for a given virtual host.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/vhosts/<em>name</em>/topic-permissions</td><td class="confluenceTd">A list of all topic permissions for a given virtual host.</td></tr><tr role="row"><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/vhosts/<em>name</em>/start/<em>node</em></td><td class="confluenceTd">Starts virtual host<span>&nbsp;</span><em>name</em><span>&nbsp;</span>on node<span>&nbsp;</span><em>node</em>.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/users/</td><td class="confluenceTd">A list of all users.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/users/without-permissions</td><td class="confluenceTd">A list of users that do not have access to any virtual host.</td></tr><tr role="row"><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/users/bulk-delete</td><td class="confluenceTd">Bulk deletes a list of users. Request body must contain the list:<pre>{"users" : ["user1", "user2", "user3"]}</pre></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/users/<em>name</em></td><td class="confluenceTd">An individual user. To PUT a user, you will need a body looking something like this:<pre>{"password":"secret","tags":"administrator"}</pre>or:<pre>{"password_hash":"2lmoth8l4H0DViLaK9Fxi6l9ds8=", "tags":"administrator"}</pre>The<span>&nbsp;</span><code>tags</code><span>&nbsp;</span>key is mandatory. Either<span>&nbsp;</span><code>password</code><span>&nbsp;</span>or<span>&nbsp;</span><code>password_hash</code><span>&nbsp;</span>can be set. If neither are set the user will not be able to log in with a password, but other mechanisms like client certificates may be used. Setting<span>&nbsp;</span><code>password_hash</code><span>&nbsp;</span>to<span>&nbsp;</span><code>""</code><span>&nbsp;</span>will ensure the user cannot use a password to log in.<span>&nbsp;</span><code>tags</code><span>&nbsp;</span>is a comma-separated list of tags for the user. Currently recognised tags are<span>&nbsp;</span><code>administrator</code>,<span>&nbsp;</span><code>monitoring</code><span>&nbsp;</span>and<span>&nbsp;</span><code>management</code>.<span>&nbsp;</span><code>password_hash</code><span>&nbsp;</span>must be generated using the algorithm described<span>&nbsp;</span><a href="https://rabbitmq.com/passwords.html#computing-password-hash" class="external-link" rel="nofollow">here</a>. You may also specify the hash function being used by adding the<span>&nbsp;</span><code>hashing_algorithm</code><span>&nbsp;</span>key to the body. Currently recognised algorithms are<span>&nbsp;</span><code>rabbit_password_hashing_sha256</code>,<span>&nbsp;</span><code>rabbit_password_hashing_sha512</code>, and<span>&nbsp;</span><code>rabbit_password_hashing_md5</code>.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/users/<em>user</em>/permissions</td><td class="confluenceTd">A list of all permissions for a given user.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/users/<em>user</em>/topic-permissions</td><td class="confluenceTd">A list of all topic permissions for a given user.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/user-limits</td><td class="confluenceTd">Lists per-user limits for all users.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/user-limits/<em>user</em></td><td class="confluenceTd">Lists per-user limits for a specific user.</td></tr><tr role="row"><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/user-limits/<em>user</em>/<em>name</em></td><td class="confluenceTd">Set or delete per-user limit for<span>&nbsp;</span><code>user</code>. The<span>&nbsp;</span><code>name</code><span>&nbsp;</span>URL path element refers to the name of the limit (<code>max-connections</code>,<span>&nbsp;</span><code>max-channels</code>). Limits are set using a JSON document in the body:<pre>{"value": 100}</pre>. Example request:<br><pre>curl -4u 'guest:guest' -H 'content-type:application/json' -X PUT localhost:15672/api/user-limits/guest/max-connections -d '{"value": 50}'</pre></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/whoami</td><td class="confluenceTd">Details of the currently authenticated user.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/permissions</td><td class="confluenceTd">A list of all permissions for all users.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/permissions/<em>vhost</em>/<em>user</em></td><td class="confluenceTd">An individual permission of a user and virtual host. To PUT a permission, you will need a body looking something like this:<pre>{"configure":".*","write":".*","read":".*"}</pre>All keys are mandatory.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/topic-permissions</td><td class="confluenceTd">A list of all topic permissions for all users.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/topic-permissions/<em>vhost</em>/<em>user</em></td><td class="confluenceTd">Topic permissions for a user and virtual host. To PUT a topic permission, you will need a body looking something like this:<pre>{"exchange":"amq.topic","write":"^a","read":".*"}</pre>All keys are mandatory.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/parameters</td><td class="confluenceTd">A list of all vhost-scoped parameters.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/parameters/<em>component</em></td><td class="confluenceTd">A list of all vhost-scoped parameters for a given component.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/parameters/<em>component</em>/<em>vhost</em></td><td class="confluenceTd">A list of all vhost-scoped parameters for a given component and virtual host.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/parameters/<em>component</em>/<em>vhost</em>/<em>name</em></td><td class="confluenceTd">An individual vhost-scoped parameter. To PUT a parameter, you will need a body looking something like this:<pre>{"vhost": "/","component":"federation","name":"local_username","value":"guest"}</pre></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/global-parameters</td><td class="confluenceTd">A list of all global parameters.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/global-parameters/<em>name</em></td><td class="confluenceTd">An individual global parameter. To PUT a parameter, you will need a body looking something like this:<pre>{"name":"user_vhost_mapping","value":{"guest":"/","rabbit":"warren"}}</pre></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/policies</td><td class="confluenceTd">A list of all policies.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/policies/<em>vhost</em></td><td class="confluenceTd">A list of all policies in a given virtual host.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/policies/<em>vhost</em>/<em>name</em></td><td class="confluenceTd">An individual policy. To PUT a policy, you will need a body looking something like this:<pre>{"pattern":"^amq.", "definition": {"federation-upstream-set":"all"}, "priority":0, "apply-to": "all"}</pre><code>pattern</code><span>&nbsp;</span>and<span>&nbsp;</span><code>definition</code><span>&nbsp;</span>are mandatory,<span>&nbsp;</span><code>priority</code><span>&nbsp;</span>and<span>&nbsp;</span><code>apply-to</code><span>&nbsp;</span>are optional.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/operator-policies</td><td class="confluenceTd">A list of all operator policy overrides.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/operator-policies/<em>vhost</em></td><td class="confluenceTd">A list of all operator policy overrides in a given virtual host.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/operator-policies/<em>vhost</em>/<em>name</em></td><td class="confluenceTd">An individual operator policy. To PUT a policy, you will need a body looking something like this:<pre>{"pattern":"^amq.", "definition": {"expires":100}, "priority":0, "apply-to": "queues"}</pre><code>pattern</code><span>&nbsp;</span>and<span>&nbsp;</span><code>definition</code><span>&nbsp;</span>are mandatory,<span>&nbsp;</span><code>priority</code><span>&nbsp;</span>and<span>&nbsp;</span><code>apply-to</code><span>&nbsp;</span>are optional.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/aliveness-test/<em>vhost</em></td><td class="confluenceTd">Declares a test queue on the target node, then publishes and consumes a message. Intended to be used as a very basic health check. Responds a 200 OK if the check succeeded, otherwise responds with a 503 Service Unavailable.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/health/checks/alarms</td><td class="confluenceTd">Responds a 200 OK if there are no alarms in effect in the cluster, otherwise responds with a 503 Service Unavailable.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/health/checks/local-alarms</td><td class="confluenceTd">Responds a 200 OK if there are no local alarms in effect on the target node, otherwise responds with a 503 Service Unavailable.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/health/checks/certificate-expiration/<em>within</em>/<em>unit</em></td><td class="confluenceTd"><p>Checks the expiration date on the certificates for every listener configured to use TLS. Responds a 200 OK if all certificates are valid (have not expired), otherwise responds with a 503 Service Unavailable.</p><p>Valid units: days, weeks, months, years. The value of the<span>&nbsp;</span><em>within</em><span>&nbsp;</span>argument is the number of units. So, when<span>&nbsp;</span><em>within</em><span>&nbsp;</span>is 2 and<span>&nbsp;</span><em>unit</em><span>&nbsp;</span>is "months", the expiration period used by the check will be the next two months.</p></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/health/checks/port-listener/<em>port</em></td><td class="confluenceTd">Responds a 200 OK if there is an active listener on the give port, otherwise responds with a 503 Service Unavailable.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/health/checks/protocol-listener/<em>protocol</em></td><td class="confluenceTd">Responds a 200 OK if there is an active listener for the given protocol, otherwise responds with a 503 Service Unavailable. Valid protocol names are: amqp091, amqp10, mqtt, stomp, web-mqtt, web-stomp.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/health/checks/virtual-hosts</td><td class="confluenceTd">Responds a 200 OK if all virtual hosts and running on the target node, otherwise responds with a 503 Service Unavailable.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/health/checks/node-is-mirror-sync-critical</td><td class="confluenceTd">Checks if there are classic mirrored queues without synchronised mirrors online (queues that would potentially lose data if the target node is shut down). Responds a 200 OK if there are no such classic mirrored queues, otherwise responds with a 503 Service Unavailable.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/health/checks/node-is-quorum-critical</td><td class="confluenceTd">Checks if there are quorum queues with minimum online quorum (queues that would lose their quorum and availability if the target node is shut down). Responds a 200 OK if there are no such quorum queues, otherwise responds with a 503 Service Unavailable.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/vhost-limits</td><td class="confluenceTd">Lists per-vhost limits for all vhosts.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/vhost-limits/<em>vhost</em></td><td class="confluenceTd">Lists per-vhost limits for specific vhost.</td></tr><tr role="row"><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/vhost-limits/<em>vhost</em>/<em>name</em></td><td class="confluenceTd">Set or delete per-vhost limit for<span>&nbsp;</span><code>vhost</code>. The<span>&nbsp;</span><code>name</code><span>&nbsp;</span>URL path element refers to the name of the limit (<code>max-connections</code>,<span>&nbsp;</span><code>max-queues</code>). Limits are set using a JSON document in the body:<pre>{"value": 100}</pre>. Example request:<br><pre>curl -4u 'guest:guest' -H 'content-type:application/json' -X PUT localhost:15672/api/vhost-limits/my-vhost/max-connections -d '{"value": 50}'</pre></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/auth</td><td class="confluenceTd">Details about the OAuth2 configuration. It will return HTTP status 200 with body:<pre>{"enable_uaa":"boolean", "uaa_client_id":"string", "uaa_location":"string"}</pre></td></tr><tr role="row"><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd">/api/rebalance/queues</td><td class="confluenceTd">Rebalances all queues in all vhosts. This operation is asynchronous therefore please check the RabbitMQ log file for messages regarding the success or failure of the operation.<pre>curl -4u 'guest:guest' -XPOST localhost:15672/api/rebalance/queues/</pre></td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/federation-links<br>/api/federation-links/<em>vhost</em></td><td class="confluenceTd">Provides status for all federation links. Requires the<span>&nbsp;</span><code>rabbitmq_federation_management</code><span>&nbsp;</span>plugin to be enabled.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/auth/attempts/<em>node</em></td><td class="confluenceTd">A list of authentication attempts.</td></tr><tr role="row"><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">X</td><td class="confluenceTd"><br></td><td class="confluenceTd">/api/auth/attempts/<em>node</em>/source</td><td class="confluenceTd">A list of authentication attempts by remote address and username.</td></tr></tbody></table></div><h2 id="RabbitMQhighavailabilityanddisasterrecovery-12.RabbitMQFirewallRules"><strong>12.&nbsp;</strong><strong>RabbitMQ Firewall Rules</strong></h2><p style="text-align: left;">CLI tools, client libraries and RabbitMQ nodes also open connections (client TCP sockets). Firewalls can prevent nodes and CLI tools from communicating with each other. <br>Make sure the following default ports are accessible, if custom ports are defined then the custom ports will need to be opened :</p><ul style="text-align: left;"><li>4369:<span>&nbsp;</span><a style="text-decoration: underline;" href="http://erlang.org/doc/man/epmd.html" class="external-link" rel="nofollow">epmd</a>, a peer discovery service used by RabbitMQ nodes and CLI tools</li><li>5672, 5671: used by AMQP 0-9-1 and 1.0 clients without and with TLS</li><li>25672: used for inter-node and CLI tools communication (Erlang distribution server port) and is allocated from a dynamic range (limited to a single port by default, computed as AMQP port + 20000). Unless external connections on these ports are really necessary (e.g. the cluster uses<span>&nbsp;</span><a href="https://www.rabbitmq.com/federation.html" style="text-decoration: underline;" class="external-link" rel="nofollow">federation</a><span>&nbsp;</span>or CLI tools are used on machines outside the subnet), these ports should not be publicly exposed. See<span>&nbsp;</span><a href="https://www.rabbitmq.com/networking.html" style="text-decoration: underline;" class="external-link" rel="nofollow">networking guide</a><span>&nbsp;</span>for details.</li><li>35672-35682: used by CLI tools (Erlang distribution client ports) for communication with nodes and is allocated from a dynamic range (computed as server distribution port + 10000 through server distribution port + 10010). See<span>&nbsp;</span><a style="text-decoration: underline;" href="https://www.rabbitmq.com/networking.html" class="external-link" rel="nofollow">networking guide</a><span>&nbsp;</span>for details.</li><li>15672:<span>&nbsp;</span><a style="text-decoration: underline;" href="https://www.rabbitmq.com/management.html" class="external-link" rel="nofollow">HTTP API</a><span>&nbsp;</span>clients,<span>&nbsp;</span><a style="text-decoration: underline;" href="https://www.rabbitmq.com/management.html" class="external-link" rel="nofollow">management UI</a><span>&nbsp;</span>and<span>&nbsp;</span><a href="https://www.rabbitmq.com/management-cli.html" style="text-decoration: underline;" class="external-link" rel="nofollow">rabbitmqadmin</a><span>&nbsp;</span>(only if the<span>&nbsp;</span><a href="https://www.rabbitmq.com/management.html" style="text-decoration: underline;" class="external-link" rel="nofollow">management plugin</a><span>&nbsp;</span>is enabled)</li><li>61613, 61614:<span>&nbsp;</span><a href="https://stomp.github.io/stomp-specification-1.2.html" style="text-decoration: underline;" class="external-link" rel="nofollow">STOMP clients</a><span>&nbsp;</span>without and with TLS (only if the<span>&nbsp;</span><a href="https://www.rabbitmq.com/stomp.html" style="text-decoration: underline;" class="external-link" rel="nofollow">STOMP plugin</a><span>&nbsp;</span>is enabled)</li><li>1883, 8883:<span>&nbsp;</span><a style="text-decoration: underline;" href="http://mqtt.org/" class="external-link" rel="nofollow">MQTT clients</a><span>&nbsp;</span>without and with TLS, if the<span>&nbsp;</span><a style="text-decoration: underline;" href="https://www.rabbitmq.com/mqtt.html" class="external-link" rel="nofollow">MQTT plugin</a><span>&nbsp;</span>is enabled</li><li>15674: STOMP-over-WebSockets clients (only if the<span>&nbsp;</span><a href="https://www.rabbitmq.com/web-stomp.html" style="text-decoration: underline;" class="external-link" rel="nofollow">Web STOMP plugin</a><span>&nbsp;</span>is enabled)</li><li>15675: MQTT-over-WebSockets clients (only if the<span>&nbsp;</span><a href="https://www.rabbitmq.com/web-mqtt.html" style="text-decoration: underline;" class="external-link" rel="nofollow">Web MQTT plugin</a><span>&nbsp;</span>is enabled)</li><li>15692: Prometheus metrics (only if the<span>&nbsp;</span><a style="text-decoration: underline;" href="https://www.rabbitmq.com/prometheus.html" class="external-link" rel="nofollow">Prometheus plugin</a><span>&nbsp;</span>is enabled)</li></ul><p><br></p><h2 id="RabbitMQhighavailabilityanddisasterrecovery-13.RabbitMQEnvironmentVariables"><strong>13.&nbsp;</strong><strong>RabbitMQ Environment Variables</strong></h2><p>RabbitMQ environment variable names have the prefix RABBITMQ_. A typical variable called RABBITMQ_<em>var_name</em><span>&nbsp;</span>is set as follows:</p><ul><li>a shell environment variable called RABBITMQ_<em>var_name</em><span>&nbsp;</span>is used if this is defined;</li><li><em>otherwise</em>, a variable called<span>&nbsp;</span><em>var_name</em><span>&nbsp;</span>is used if this is set in the rabbitmq-env.conf file;</li><li><em>otherwise</em>, a system-specified default value is used.</li></ul><p>In this way, variables set in the shell environment take priority over variables set in rabbitmq-env.conf, which in turn over-ride RabbitMQ built-in defaults.</p><p>It is unlikely you will need to set any of these environment variables. If you have non-standard requirements, then RabbitMQ environment variables include, but are not limited to:</p><div class="table-wrap"><table class="wrapped confluenceTable" resolved=""><colgroup><col><col><col></colgroup><tbody><tr><td class="confluenceTd"><strong>Name</strong></td><td class="confluenceTd"><strong>Default</strong></td><td class="confluenceTd"><strong>Description</strong></td></tr><tr><td class="confluenceTd">RABBITMQ_NODE_IP_ADDRESS</td><td class="confluenceTd">the empty string - meaning bind to all network interfaces.</td><td class="confluenceTd">Change this if you only want to bind to one network interface. To bind to two or more interfaces, use the tcp_listeners key in rabbitmq.config.</td></tr><tr><td class="confluenceTd">RABBITMQ_NODE_PORT</td><td class="confluenceTd">5672</td><td class="confluenceTd"><br></td></tr><tr><td class="confluenceTd">RABBITMQ_DIST_PORT</td><td class="confluenceTd">RABBITMQ_NODE_PORT + 20000</td><td class="confluenceTd">Port to use for clustering. Ignored if your config file sets inet_dist_listen_min or inet_dist_listen_max</td></tr><tr><td class="confluenceTd">RABBITMQ_NODENAME</td><td class="confluenceTd"><ul><li><strong>Unix*:</strong><span>&nbsp;</span>rabbit@$HOSTNAME$HOSTNAME</li><li><strong>Windows:</strong><span>&nbsp;</span>rabbit@%COMPUTERNAME%%COMPUTERNAME%</li></ul></td><td class="confluenceTd">The node name should be unique per erlang-node-and-machine combination. To run multiple nodes, see the<span>&nbsp;</span><a href="https://rabbitmq.docs.pivotal.io/36/rabbit-web-docs/clustering.html" style="text-decoration: none;" class="external-link" rel="nofollow">clustering guide</a>.</td></tr><tr><td class="confluenceTd">RABBITMQ_USE_LONGNAME</td><td class="confluenceTd"><br></td><td class="confluenceTd">When set to true this will cause RabbitMQ to use fully qualified names to identify nodes. This may prove useful on EC2. Note that it is not possible to switch between using short and long names without resetting the node.</td></tr><tr><td class="confluenceTd">RABBITMQ_SERVICENAME</td><td class="confluenceTd"><strong>Windows Service:</strong><span>&nbsp;</span>RabbitMQ</td><td class="confluenceTd">The name of the installed service. This will appear in services.msc.</td></tr><tr><td class="confluenceTd">RABBITMQ_CONSOLE_LOG</td><td class="confluenceTd"><strong>Windows Service:</strong></td><td class="confluenceTd">Set this variable to new or reuse to redirect console output from the server to a file named %RABBITMQ_SERVICENAME%.debug in the default<span>&nbsp;</span><strong>RABBITMQ_BASE</strong><span>&nbsp;</span>directory.<ul><li>If not set, console output from the server will be discarded (default).</li><li>new A new file will be created each time the service starts.</li><li>reuse The file will be overwritten each time the service starts.</li></ul></td></tr><tr><td class="confluenceTd">RABBITMQ_CTL_ERL_ARGS</td><td class="confluenceTd">None</td><td class="confluenceTd">Parameters for the erl command used when invoking rabbitmqctl. This should be overridden for debugging purposes only.</td></tr><tr><td class="confluenceTd">RABBITMQ_SERVER_ERL_ARGS</td><td class="confluenceTd"><ul><li><strong>Unix*:</strong><span>&nbsp;</span>“+K true +A30 +P 1048576 -kernel inet_default_connect_options [{nodelay,true}]”</li><li><strong>Windows:</strong><span>&nbsp;</span>None</li></ul></td><td class="confluenceTd">Standard parameters for the erl command used when invoking the RabbitMQ Server. This should be overridden for debugging purposes only. Overriding this variable<span>&nbsp;</span><strong>replaces</strong><span>&nbsp;</span>the default value.</td></tr><tr><td class="confluenceTd">RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS</td><td class="confluenceTd"><ul><li><strong>Unix*:</strong><span>&nbsp;</span>None</li><li><strong>Windows:</strong><span>&nbsp;</span>None</li></ul></td><td class="confluenceTd">Additional parameters for the erl command used when invoking the RabbitMQ Server. The value of this variable is<span>&nbsp;</span><strong>appended</strong><span>&nbsp;</span>the default list of arguments (<strong>RABBITMQ_SERVER_ERL_ARGS</strong>).</td></tr><tr><td class="confluenceTd">RABBITMQ_SERVER_START_ARGS</td><td class="confluenceTd">None</td><td class="confluenceTd">Extra parameters for the erl command used when invoking the RabbitMQ Server. This will not override<span>&nbsp;</span><strong>RABBITMQ_SERVER_ERL_ARGS</strong>.</td></tr></tbody></table></div><pre class="lang-bash hljs">Following is my configuration file at local to modify some environment variables.<br><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="775" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/image2021-4-22_9-58-8.png" data-image-src="/confluence/download/attachments/187236375/image2021-4-22_9-58-8.png?version=1&amp;modificationDate=1619056692000&amp;api=v2" data-unresolved-comment-count="0" data-linked-resource-id="187237242" data-linked-resource-version="1" data-linked-resource-type="attachment" data-linked-resource-default-alias="image2021-4-22_9-58-8.png" data-base-url="https://codesparks.ncs.com.sg/confluence" data-linked-resource-content-type="image/png" data-linked-resource-container-id="187236375" data-linked-resource-container-version="110"></span><br><br></pre><p><br></p><div class="confluence-information-macro confluence-information-macro-information conf-macro output-block" data-hasbody="true" data-macro-name="info"><p class="title">Related articles</p><span class="aui-icon aui-icon-small aui-iconfont-info confluence-information-macro-icon"> </span><div class="confluence-information-macro-body"><ul><li><a href="https://www.rabbitmq.com/blog/2020/07/07/disaster-recovery-and-high-availability-101/#more-1496" class="external-link" rel="nofollow">https://www.rabbitmq.com/blog/2020/07/07/disaster-recovery-and-high-availability-101/#more-1496</a></li><li><span><a href="https://www.rabbitmq.com/relocate.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/relocate.html</a></span></li><li><a href="https://www.rabbitmq.com/install-windows-manual.html#running-windows-service" class="external-link" rel="nofollow">https://www.rabbitmq.com/install-windows-manual.html#running-windows-service</a></li><li><span><a href="https://www.rabbitmq.com/ha.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/ha.html</a></span></li><li><span><a href="https://www.rabbitmq.com/clustering.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/clustering.html</a></span></li><li><span><a href="https://www.rabbitmq.com/ttl.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/ttl.html</a></span></li><li><span><a href="https://www.rabbitmq.com/backup.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/backup.html</a></span></li><li><span><a href="https://www.rabbitmq.com/shovel-static.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/shovel-static.html</a></span></li><li><span><a href="https://www.rabbitmq.com/shovel-dynamic.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/shovel-dynamic.html</a></span></li><li><span><a href="https://www.rabbitmq.com/uri-spec.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/uri-spec.html</a></span></li><li><span><a href="https://www.rabbitmq.com/federated-exchanges.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/federated-exchanges.html</a></span></li><li><span><a href="https://www.rabbitmq.com/federation.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/federation.html</a></span></li><li><span><a href="https://www.rabbitmq.com/clustering-ssl.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/clustering-ssl.html</a></span></li><li><span><a href="https://www.rabbitmq.com/ssl.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/ssl.html</a></span></li><li><span><a href="https://www.rabbitmq.com/uri-query-parameters.html#tls" class="external-link" rel="nofollow">https://www.rabbitmq.com/uri-query-parameters.html#tls</a></span></li><li><span><a href="https://www.rabbitmq.com/access-control.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/access-control.html</a></span></li><li><span><a href="https://rabbitmq.docs.pivotal.io/37/rabbit-web-docs/ssl.html" class="external-link" rel="nofollow">https://rabbitmq.docs.pivotal.io/37/rabbit-web-docs/ssl.html</a></span></li><li><span><a href="https://www.rabbitmq.com/monitoring.html#health-checks" class="external-link" rel="nofollow">https://www.rabbitmq.com/monitoring.html#health-checks</a></span></li><li><span><a href="https://www.rabbitmq.com/rabbitmq-diagnostics.8.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/rabbitmq-diagnostics.8.html</a></span></li><li><span><a href="https://www.rabbitmq.com/rabbitmqctl.8.html" class="external-link" rel="nofollow">https://www.rabbitmq.com/rabbitmqctl.8.html</a></span></li><li><span><a href="https://www.rabbitmq.com/networking.html#ports" class="external-link" rel="nofollow">https://www.rabbitmq.com/networking.html#ports</a></span></li><li><span><a href="https://rabbitmq.docs.pivotal.io/36/rabbit-web-docs/configure.html" class="external-link" rel="nofollow">https://rabbitmq.docs.pivotal.io/36/rabbit-web-docs/configure.html</a></span></li><li><span><a href="https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html" class="external-link" rel="nofollow">https://rawcdn.githack.com/rabbitmq/rabbitmq-server/v3.8.14/deps/rabbitmq_management/priv/www/api/index.html</a></span></li></ul></div></div><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p><p style="text-align: center;"><br></p>

                
        
    
        </div>

                        
    



<div id="likes-and-labels-container"><div id="likes-section" class="no-print"><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" class="like-button"><span class="aui-icon aui-icon-small aui-iconfont-like"></span><span class="like-button-text">Like</span></a><span class="like-summary like-summary-margin-left">Be the first to like this</span></div><div id="labels-section" class="pageSection group">
    <div class="labels-section-content content-column" entityid="187236375" entitytype="page">
	<div class="labels-content">
		
    <ul class="label-list label-list-right  has-pen">
                    
        <li class="aui-label " data-label-id="137035785"><a class="aui-label-split-main" href="https://codesparks.ncs.com.sg/confluence/label/AMSConnect/rabbitmq" rel="tag">rabbitmq</a></li>
                <li class="labels-edit-container">
            <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="show-labels-editor" title="Edit Labels (Type &#39;l&#39;)">
                <span class="aui-icon aui-icon-small aui-iconfont-devtools-tag-small">Edit Labels</span>
            </a>
        </li>
        </ul>

    </div>
</div>
</div></div>
        
		
            




            
        








                        
    
<div id="comments-section" class="pageSection group">
        
    


    <div class="bottom-comment-panels comment-panels">
                
                    
    


        
        
    
    <div class="quick-comment-container comment add"><p class="comment-user-logo"><a class="userLogoLink userlink-0" data-username="yuchensun" href="https://codesparks.ncs.com.sg/confluence/users/profile/editmyprofilepicture.action" title="" data-user-hover-bound="true"><img class="userLogo logo defaultLogo" src="./RabbitMQ high availability and disaster recovery - AMSConnect - NCS-CodeSparks_files/add_profile_pic.svg" alt="User icon: Add a picture of yourself" title=""></a></p><div class="quick-comment-body"><div class="quick-comment-loading-container" style="display:none;"></div><div id="editor-messages"></div><div id="all-messages"></div><form style="display:block;" class="quick-comment-form aui" method="post" name="inlinecommentform" action="https://codesparks.ncs.com.sg/confluence/pages/doaddcomment.action?pageId=187236375"><div title="Add a Comment (Type &#39;m&#39;)" class="quick-comment-prompt"><span>Write a comment…</span></div></form></div></div>

            </div>

            <div id="comments-actions" class="aui-toolbar noprint" style="display: none;">
            <p class="toolbar-group">
                <span class="toolbar-item"><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery?showComments=true&amp;showCommentArea=true#addcomment" id="add-comment-rte" accesskey="m" class="toolbar-trigger">Add Comment</a></span>
            </p>
        </div>
    </div>
        


                
    
            
</div>

    

    




    
    

    
    
    


    
<div id="space-tools-web-items" class="hidden">
                <div data-label="Overview" data-href="/confluence/spaces/viewspacesummary.action?key=AMSConnect">Overview</div>
            <div data-label="Permissions" data-href="/confluence/spaces/spacepermissions.action?key=AMSConnect">Permissions</div>
            <div data-label="Content Tools" data-href="/confluence/pages/templates2/listpagetemplates.action?key=AMSConnect">Content Tools</div>
            <div data-label="Look and Feel" data-href="/confluence/spaces/choosetheme.action?key=AMSConnect">Look and Feel</div>
            <div data-label="Integrations" data-href="/confluence/spaces/hipchat2.action?key=AMSConnect">Integrations</div>
    </div>
        



            </div><!-- \#main -->
            
    
    
        
            
            

<div id="footer" role="contentinfo" style="margin-left: 55px;">
    <section class="footer-body">

                                                    
        

        <ul id="poweredby">
            <li class="noprint">Powered by <a href="http://www.atlassian.com/software/confluence" class="hover-footer-link" rel="nofollow">Atlassian Confluence</a> <span id="footer-build-information">7.4.1</span></li>
            <li class="print-only">Printed by Atlassian Confluence 7.4.1</li>
            <li class="noprint"><a href="https://support.atlassian.com/help/confluence" class="hover-footer-link" rel="nofollow">Report a bug</a></li>
            <li class="noprint"><a href="https://www.atlassian.com/company" class="hover-footer-link" rel="nofollow">Atlassian News</a></li>
        </ul>

        

        <div id="footer-logo"><a href="http://www.atlassian.com/" rel="nofollow">Atlassian</a></div>

                    
        
    </section>
</div>

    
</div>

</div><!-- \#full-height-container -->
</div><!-- \#page -->

    <span style="display:none;" id="confluence-server-performance">{"serverDuration": 3158, "requestCorrelationId": "07daf93d9ce1d018"}</span>


    
<div id="editor-preload-container" style="display: none;">
 

<div class="hidden">
        


<content tag="breadcrumbs">
    
    
    <ol id="quickedit-breadcrumbs">
                                        
                        
        <li class="first">
                        
                            <span class=""><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect" target="_blank">AMSConnect</a></span>
                                                                                    
                        
        </li><li>
                        
                            <span class=""><a href="https://codesparks.ncs.com.sg/confluence/collector/pages.action?key=AMSConnect" target="_blank">Dashboard</a></span>
                                                                                    
                        
        </li><li>
                        
                            <span class=""><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/AMSConnect+Home" target="_blank">AMSConnect Home</a></span>
                                                                                    
                        
        </li><li>
                        
                            <span class=""><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/How-to+articles" target="_blank">How-to articles</a></span>
                                                                                    
                        
        </li><li>
                        
                            <span class="edited-page-title"><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery" target="_blank">RabbitMQ high availability and disaster recovery</a></span>
                                                                    </li></ol>

</content>
</div>


        
    

                                                                                        

<script type="text/x-template" title="editor-css" id="editor-css-resources">
    <link type="text/css" rel="stylesheet" href="/confluence/s/e8ad5c5faba5800a38e26f34d3d4c10e-CDN/ab8opv/8401/758836457240a7983be3b3db3463da30107b780e/004bc84247c31b318eac5b6d856dc994/_/download/contextbatch/css/editor-content/batch.css?frontend.editor.v4=true" data-wrm-key="editor-content" data-wrm-batch-type="context" media="all">

</script>













        

<div class="editor-container">

        
            

<div id="link-browser-tab-items" class="hidden">
                <div title="Search" data-weight="10">search</div>
            <div title="Recently viewed" data-weight="20">recentlyviewed</div>
            <div title="Files" data-weight="30">attachments</div>
            <div title="Web link" data-weight="40">weblink</div>
            <div title="Advanced" data-weight="50">advanced</div>
    </div>
            <div id="image-properties-tab-items" class="hidden">
                <div title="Effects" data-weight="10">image-effects</div>
            <div title="Title" data-weight="20">image-attributes</div>
    </div>
            

 










<div id="toolbar">
    <div id="rte-toolbar" class="aui-toolbar aui-toolbar2">

        <div class="aui-toolbar2-primary toolbar-primary">
            <ul class="aui-buttons rte-toolbar-group-formatting">
                            <li id="format-dropdown" class="toolbar-item toolbar-dropdown">
                    <div class="aui-dd-parent">
                        <a id="format-dropdown-display" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar-trigger aui-dd-trigger aui-button" data-control-id="formatselect">
                            <span class="dropdown-text">Paragraph</span>
                                        
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                        </a>
                        <ul id="format-dropdown-display-menu" class="aui-dropdown hidden">
                            <li class="dropdown-item format-p" data-format="p" data-tooltip="Paragraph (Ctrl+0)">
    <a class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">Paragraph</a>
</li>
                                <li class="dropdown-item format-h1" data-format="h1" data-tooltip="Heading 1 (Ctrl+1)">
    <a class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">Heading 1</a>
</li>
                                <li class="dropdown-item format-h2" data-format="h2" data-tooltip="Heading 2 (Ctrl+2)">
    <a class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">Heading 2</a>
</li>
                                <li class="dropdown-item format-h3" data-format="h3" data-tooltip="Heading 3 (Ctrl+3)">
    <a class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">Heading 3</a>
</li>
                                <li class="dropdown-item format-h4" data-format="h4" data-tooltip="Heading 4 (Ctrl+4)">
    <a class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">Heading 4</a>
</li>
                                <li class="dropdown-item format-h5" data-format="h5" data-tooltip="Heading 5 (Ctrl+5)">
    <a class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">Heading 5</a>
</li>
                                <li class="dropdown-item format-h6" data-format="h6" data-tooltip="Heading 6 (Ctrl+6)">
    <a class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">Heading 6</a>
</li>
                                <li class="dropdown-item format-pre" data-format="pre" data-tooltip="Preformatted (Ctrl+7)">
    <a class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">Preformatted</a>
</li>
                                <li class="dropdown-item format-blockquote" data-format="blockquote" data-tooltip="Quote (Ctrl+8)">
    <a class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">Quote</a>
</li>
                        </ul>
                    </div>
                </li>
            </ul>

            <ul class="aui-buttons rte-toolbar-group-style">
                
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-bold" data-tooltip="Bold (Ctrl+B)">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="bold">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-bold ">Bold</span>
    </a>
</li>
                
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-italic" data-tooltip="Italic (Ctrl+I)">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="italic">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-italic ">Italic</span>
    </a>
</li>
                
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-underline" data-tooltip="Underline (Ctrl+U)">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="underline">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-underline ">Underline</span>
    </a>
</li>
                            <li id="color-picker-control" class="toolbar-item toolbar-splitbutton">
                    <a class="toolbar-trigger aui-button" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" id="rte-button-color" data-color="003366" data-tooltip="Color"><span class="icon aui-icon aui-icon-small aui-iconfont-editor-color ">Color picker</span><span class="selected-color"></span></a><div class="aui-dd-parent"><a class="toolbar-trigger aui-dd-trigger aui-button" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" id="rte-button-color-selector" data-control-id="colorSelector" data-tooltip="More colors"><span class="icon aui-icon aui-icon-small aui-iconfont-dropdown ">More colors</span></a><div class="color-picker-container"><div class="color-picker aui-dropdown hidden"><ul><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Black" data-tooltip="Black" style="background-color: #000000" data-color="000000">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Burnt orange" data-tooltip="Burnt orange" style="background-color: #993300" data-color="993300">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Dark olive" data-tooltip="Dark olive" style="background-color: #333300" data-color="333300">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Dark green" data-tooltip="Dark green" style="background-color: #003300" data-color="003300">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Dark azure" data-tooltip="Dark azure" style="background-color: #003366" data-color="003366">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Navy blue" data-tooltip="Navy blue" style="background-color: #000080" data-color="000080">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Indigo" data-tooltip="Indigo" style="background-color: #333399" data-color="333399">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Very dark grey" data-tooltip="Very dark grey" style="background-color: #333333" data-color="333333">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Maroon" data-tooltip="Maroon" style="background-color: #800000" data-color="800000">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Orange" data-tooltip="Orange" style="background-color: #FF6600" data-color="FF6600">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Olive" data-tooltip="Olive" style="background-color: #808000" data-color="808000">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Green" data-tooltip="Green" style="background-color: #008000" data-color="008000">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Teal" data-tooltip="Teal" style="background-color: #008080" data-color="008080">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Blue" data-tooltip="Blue" style="background-color: #0000FF" data-color="0000FF">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Greyish blue" data-tooltip="Greyish blue" style="background-color: #666699" data-color="666699">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Grey" data-tooltip="Grey" style="background-color: #7A869A" data-color="7A869A">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Red" data-tooltip="Red" style="background-color: #FF0000" data-color="FF0000">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Amber" data-tooltip="Amber" style="background-color: #FF9900" data-color="FF9900">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Yellow green" data-tooltip="Yellow green" style="background-color: #99CC00" data-color="99CC00">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Sea green" data-tooltip="Sea green" style="background-color: #339966" data-color="339966">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Turquoise" data-tooltip="Turquoise" style="background-color: #33CCCC" data-color="33CCCC">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Royal blue" data-tooltip="Royal blue" style="background-color: #3366FF" data-color="3366FF">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Purple" data-tooltip="Purple" style="background-color: #800080" data-color="800080">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Medium grey" data-tooltip="Medium grey" style="background-color: #A5ADBA" data-color="A5ADBA">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Magenta" data-tooltip="Magenta" style="background-color: #FF00FF" data-color="FF00FF">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Gold" data-tooltip="Gold" style="background-color: #FFCC00" data-color="FFCC00">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Yellow" data-tooltip="Yellow" style="background-color: #FFFF00" data-color="FFFF00">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Lime" data-tooltip="Lime" style="background-color: #00FF00" data-color="00FF00">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Aqua" data-tooltip="Aqua" style="background-color: #00FFFF" data-color="00FFFF">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Sky blue" data-tooltip="Sky blue" style="background-color: #00CCFF" data-color="00CCFF">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Red violet" data-tooltip="Red violet" style="background-color: #993366" data-color="993366">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Light grey" data-tooltip="Light grey" style="background-color: #C1C7D0" data-color="C1C7D0">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Pink" data-tooltip="Pink" style="background-color: #FF99CC" data-color="FF99CC">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Peach" data-tooltip="Peach" style="background-color: #FFCC99" data-color="FFCC99">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Light yellow" data-tooltip="Light yellow" style="background-color: #FFFF99" data-color="FFFF99">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Pale green" data-tooltip="Pale green" style="background-color: #CCFFCC" data-color="CCFFCC">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Pale cyan" data-tooltip="Pale cyan" style="background-color: #CCFFFF" data-color="CCFFFF">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Light sky blue" data-tooltip="Light sky blue" style="background-color: #99CCFF" data-color="99CCFF">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="Plum" data-tooltip="Plum" style="background-color: #CC99FF" data-color="CC99FF">&nbsp;</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" aria-label="White" data-tooltip="White" style="background-color: #FFFFFF" data-color="FFFFFF">&nbsp;</a></li></ul></div></div></div>
                </li>
                <li id="more-menu" class="toolbar-item toolbar-dropdown">
                    <div class="aui-dd-parent">
                        <a id="rte-button-more" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar-trigger aui-dd-trigger aui-button" data-tooltip="More">
                                        
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-styles ">Formatting</span>
                                            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                        </a>
                        <div id="rte-button-more-menu" class="aui-dropdown grouped hidden">
                            <div class="grouped-dropdown-item">
                                <ul>
                                                        <li class="dropdown-item more-menu-trigger" data-control-id="strikethrough" data-tooltip="Strikethrough (Ctrl+Shift+S)">
    <a id="rte-strikethrough" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
Strikethrough
    </a>
</li>
                                                             <li class="dropdown-item more-menu-trigger" data-control-id="sub" data-tooltip="">
    <a id="rte-sub" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
Subscript
    </a>
</li>
                                                             <li class="dropdown-item more-menu-trigger" data-control-id="sup" data-tooltip="">
    <a id="rte-sup" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
Superscript
    </a>
</li>
                                                    <li class="dropdown-item more-menu-trigger" data-control-id="monospace" data-tooltip="Format text with monospaced font">
    <a id="rte-monospace" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
Monospace
    </a>
</li>

                                                                                                                </ul>
                            </div>
                            <div class="grouped-dropdown-item">
                                <ul>
                                    <li class="dropdown-item more-menu-trigger no-icon" data-format="removeformat" data-tooltip="Clears formatting on currently selected text">
<a id="rte-removeformat" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
    Clear formatting
</a>
</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                </li>
            </ul>

            <ul class="aui-buttons rte-toolbar-group-lists">
                
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-bullist" data-tooltip="Bullet list (Ctrl+Shift+B)">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="bullist">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-list-bullet ">Bullet list</span>
    </a>
</li>
                    
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-numlist" data-tooltip="Numbered list (Ctrl+Shift+N)">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="numlist">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-list-number ">Numbered list</span>
    </a>
</li>
            </ul>
                            <ul class="aui-buttons rte-toolbar-group-task-lists">
                    
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-tasklist" data-tooltip="Task list ([ then ])">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="tasklist">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-task ">Task list</span>
    </a>
</li>
                </ul>
            
            <ul class="aui-buttons rte-toolbar-group-indentation">
                
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-outdent" data-tooltip="Outdent">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="outdent">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-indent-left ">Outdent</span>
    </a>
</li>
                    
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-indent" data-tooltip="Indent">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="indent">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-indent-right ">Indent</span>
    </a>
</li>
            </ul>

            <ul class="aui-buttons rte-toolbar-group-justification">
                
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-justifyleft" data-tooltip="Align left">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="justifyleft">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-align-left ">Align left</span>
    </a>
</li>
                    
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-justifycenter" data-tooltip="Align center">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="justifycenter">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-align-center ">Align center</span>
    </a>
</li>
                    
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-justifyright" data-tooltip="Align right">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="justifyright">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-align-right ">Align right</span>
    </a>
</li>
            </ul>

                            <ul class="aui-buttons hidden" id="page-layout-2-group">
                    <li id="page-layout-2" class="toolbar-item" data-tooltip="Page layout">
                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="aui-button aui-button-subtle toolbar-trigger" id="rte-button-pagelayout-2">
                                        
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-layout ">Page layout</span>
                        </a>
                    </li>
                </ul>
            

            <ul class="aui-buttons rte-toolbar-group-files hidden"></ul>

            <ul class="aui-buttons rte-toolbar-group-link no-separator">
                <li class="toolbar-item" data-tooltip="Insert link (Ctrl+K)">
                    <a id="rte-button-link" class="toolbar-trigger aui-button aui-button-subtle" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="linkbrowserButton">
                                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-link "></span>
                        <span class="trigger-text">Link</span>
                    </a>
                </li>
            </ul>

            <ul class="aui-buttons rte-toolbar-group-table no-separator">
                <li class="toolbar-item toolbar-dropdown" id="insert-table-dropdown">
                    <div class="aui-dd-parent">
                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar-trigger aui-dd-trigger aui-button aui-button-subtle" id="rte-button-insert-table" data-tooltip="Insert table">
                                        
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-table "></span>
                            <span class="dropdown-text">Table</span>
                                        
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                        </a>

                        <div id="table-picker-container" class="hidden aui-box-shadow">
                            <div class="table-picker-box" data-tooltip="Hold SHIFT for a table without a heading.">
                                <div class="table-picker-background">
                                    <div class="picker picker-cell"></div>
                                    <div class="picker picker-heading heading"></div>
                                    <div class="picker picker-selected-cell"></div>
                                    <div class="picker picker-selected-heading heading"></div>
                                </div>
                                <p class="desc"></p>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>

                                    
            
            <ul class="aui-buttons rte-toolbar-group-insert no-separator">
                <li class="toolbar-item toolbar-dropdown" id="insert-menu">
                    <div class="aui-dd-parent">
                        <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar-trigger aui-dd-trigger aui-button aui-button-subtle" id="rte-button-insert" data-tooltip="Insert more content">
                                        
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-add "></span>
                            <span class="dropdown-text">Insert</span>
                                        
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                        </a>

                        <div id="insert-menu-options" class="aui-dropdown grouped hidden">
                            <div class="grouped-dropdown-item">
                                <span class="assistive">Insert content</span>
                                <ul id="content-insert-list">
                                    
        
                <li class="dropdown-item content-image" data-command="mceConfimage" data-tooltip="Insert files and images (Ctrl+M)">
<a id="rte-insert-image" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-image "></span>
 Files and images
</a>
</li>
                                            
        
                <li class="dropdown-item content-link" data-control-id="linkbrowserButton" data-tooltip="Insert link (Ctrl+K)">
<a id="rte-insert-link" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-link "></span>
 Link
</a>
</li>
                                            
        
                <li class="dropdown-item content-wikimarkup" data-command="InsertWikiMarkup" data-tooltip="Insert markup (Ctrl+Shift+D)">
<a id="rte-insert-wikimarkup" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-code "></span>
 Markup
</a>
</li>
                                            
    
                <li class="dropdown-item content-hr" data-command="InsertHorizontalRule" data-tooltip="Insert horizontal rule (----)">
<a id="rte-insert-hr" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-horizontal-rule "></span>
 Horizontal rule
</a>
</li>
                                                                                
        
                <li class="dropdown-item content-tasklist" data-command="InsertInlineTaskListNoToggle" data-tooltip="Insert task list ([ then ])">
<a id="rte-insert-tasklist" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-task "></span>
 Task list
</a>
</li>
                                                                            
        
                <li class="dropdown-item content-date" data-command="confMenuInsertDate" data-tooltip="Insert date (/ then /)">
<a id="rte-insert-date" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-calendar "></span>
 Date
</a>
</li>
                                            
    
                <li class="dropdown-item content-emoticon" data-command="mceEmotion" data-tooltip="Insert emoticon">
<a id="rte-insert-emoticon" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-emoji "></span>
 Emoticon
</a>
</li>
                                            
    
                <li class="dropdown-item content-symbol" data-command="confCharmap" data-tooltip="Insert symbol">
<a id="rte-insert-symbol" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-symbol "></span>
 Symbol
</a>
</li>
                                    </ul>
                                <span class="assistive">Insert macro</span>
                                <ul id="macro-insert-list">
                                                                                                                                                                                                <li class="dropdown-item macro-insertmention-button" data-macro-name="insertmention-button" data-tooltip="Insert &#39;User mention&#39; macro">
<a id="insertmention-button" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-mention "></span>
 User mention
</a>
</li>
                                                                                                                                                            <li class="dropdown-item macro-jiralink" data-macro-name="jiralink" data-tooltip="Insert &#39;Jira Issue/Filter&#39; macro">
<a id="jiralink" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-jira "></span>
 Jira Issue/Filter
</a>
</li>
                                                                                                                                                            <li class="dropdown-item macro-info" data-macro-name="info" data-tooltip="Insert &#39;Info&#39; macro">
<a id="info" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-info-filled "></span>
 Info
</a>
</li>
                                                                                                                                                            <li class="dropdown-item macro-status" data-macro-name="status" data-tooltip="Insert &#39;Status&#39; macro">
<a id="status" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                        
    
    <span class="icon confluence-icon-status-macro"></span>
 Status
</a>
</li>
                                                                                                                                                            <li class="dropdown-item macro-gallery" data-macro-name="gallery" data-tooltip="Insert &#39;Gallery&#39; macro">
<a id="gallery" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-gallery "></span>
 Gallery
</a>
</li>
                                                                                                                                                            <li class="dropdown-item macro-toc" data-macro-name="toc" data-tooltip="Insert &#39;Table of Contents&#39; macro">
<a id="toc" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
                
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-overview "></span>
 Table of Contents
</a>
</li>
                                                                    </ul>
                            </div>
                            <div class="grouped-dropdown-item">
                                <ul id="more-macros-list">
                                    
        
                <li class="dropdown-item content-macro" data-command="mceConfMacroBrowser" data-tooltip="Open the macro browser (Ctrl+Shift+A)">
<a id="rte-insert-macro" class="item-link" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#">
    Other macros
</a>
</li>
                                    </ul>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>

                            <ul class="aui-buttons rte-toolbar-group-page-layouts-section-types">
                    <li id="pagelayout-menu" class="toolbar-item toolbar-dropdown">
                        <div class="aui-dd-parent">
                            <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="toolbar-trigger aui-dd-trigger aui-button aui-button-subtle" id="rte-button-pagelayout" data-tooltip="Page layout">
                                            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-default">Page layout</span>
                                            
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-dropdown "></span>
                            </a>

                            <ul id="pagelayout-menu-options" class="aui-dropdown hidden">
                                <li class="dropdown-item" data-tooltip="No layout">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-none&quot;, &quot;columns&quot;: 0   }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-none">No layout</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (simple)">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-simple&quot;, &quot;columns&quot;: [&quot;&quot;, &quot;&quot;]   }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-simple">Two column (simple)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (simple, left sidebar)">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-simple-left&quot;, &quot;columns&quot;: [&quot;aside&quot;, &quot;large&quot;]   }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-simple-left">Two column (simple, left sidebar)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (simple, right sidebar)">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-simple-right&quot;, &quot;columns&quot;: [&quot;large&quot;, &quot;aside&quot;]   }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-simple-right">Two column (simple, right sidebar)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Three column (simple)">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-three-simple&quot;, &quot;columns&quot;: [&quot;&quot;, &quot;&quot;, &quot;&quot;]   }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-three-simple">Three column (simple)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two&quot;, &quot;columns&quot;: [&quot;&quot;, &quot;&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two">Two column</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (left sidebar)">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-left&quot;, &quot;columns&quot;: [&quot;aside&quot;, &quot;large&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-left">Two column (left sidebar)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Two column (right sidebar)">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-two-right&quot;, &quot;columns&quot;: [&quot;large&quot;, &quot;aside&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-two-right">Two column (right sidebar)</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Three column">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-three&quot;, &quot;columns&quot;: [&quot;&quot;, &quot;&quot;, &quot;&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-three">Three column</span>
    </a>
</li>
                                <li class="dropdown-item" data-tooltip="Three column (left and right sidebars)">
    <a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" class="item-link" data-atlassian-layout="{&quot;name&quot;: &quot;pagelayout-three-sidebars&quot;, &quot;columns&quot;: [&quot;sidebars&quot;, &quot;large&quot;, &quot;sidebars&quot;] , &quot;header&quot;: true  , &quot;footer&quot;:true  }">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-check hidden"></span>
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-layout pagelayout-three-sidebars">Three column (left and right sidebars)</span>
    </a>
</li>
                            </ul>
                        </div>
                    </li>
                </ul>
            
                        
            <ul class="aui-buttons aui-button-subtle rte-toolbar-group-undo">
                
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-undo" data-tooltip="Undo (Ctrl+Z)">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="undo">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-undo ">Undo</span>
    </a>
</li>
                    
            <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-redo" data-tooltip="Redo (Ctrl+Y)">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="redo">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-redo ">Redo</span>
    </a>
</li>
            </ul>
        </div>                                                    <div id="draft-status" style="display:none"></div>
                <div class="aui-toolbar2-secondary">
            <ul class="aui-buttons aui-button-subtle rte-toolbar-group-searchreplace">
                <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-searchreplace" data-tooltip="Find/Replace">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="searchreplace">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-search ">Find/Replace</span>
    </a>
</li>
            </ul>
            <ul class="aui-buttons aui-button-subtle rte-toolbar-group-help">
                <li class="toolbar-item aui-button aui-button-subtle" id="rte-button-help" data-tooltip="Help">
    <a class="toolbar-trigger" href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" data-control-id="help">
                    
    
    <span class="icon aui-icon aui-icon-small aui-iconfont-editor-help ">Keyboard shortcuts help</span>
    </a>
</li>
            </ul>
        </div>    </div></div>


                <div id="editor-notifications-container"><div id="all-messages"><div id="action-messages"></div></div></div><div id="editor-precursor"><div class="cell"><div class="aui-buttons aui-toolbar2"><button class="aui-button aui-button-subtle rte-button-labels" type="button" data-tooltip="1 Label" id="rte-button-labels" data-explicit-restrictions="" data-inherited-restrictions=""><span class="icon aui-icon aui-icon-small aui-iconfont-devtools-tag"></span></button><button class="aui-button aui-button-subtle rte-button-restrictions" type="button" data-tooltip="Unrestricted" id="rte-button-restrictions" data-explicit-restrictions="false" data-inherited-restrictions="false"><span class="icon aui-icon aui-icon-small aui-iconfont-unlocked"></span></button></div><div id="content-title-div" class="collaborative"><input type="text" name="title" id="content-title" tabindex="1" class="text pagetitle" autocomplete="off" value="RabbitMQ high availability and disaster recovery" placeholder="Page title"></div></div></div>
    
<div id="wysiwyg">
    <div id="rte" class="cell editor-default collaborative">
        <textarea id="wysiwygTextarea" name="wysiwygContent" class="hidden tinymce-editor"></textarea>
    </div>
</div>
<div id="editor-html-source-container" class="hidden">
    <textarea id="editor-html-source" class="monospaceInput"></textarea>
</div>

<div id="preview">
    <div id="previewArea" class="cell">
    </div>
</div>

    <div id="savebar-container"><div id="rte-savebar" class="aui-toolbar aui-toolbar2"><div class="toolbar-split toolbar-split-row"><div class="toolbar-split toolbar-split-left"><div class="aui-buttons"></div></div><div class="toolbar-split toolbar-split-right"><div id="pluggable-status-container" class="toolbar-item rte-toolbar-pluggable-status"><div id="pluggable-status" class="synchrony"><div class="synchrony-status-indicator"><div class="status-indicator-icon aui-icon aui-icon-small aui-iconfont-devtools-task-in-progress" data-tooltip="We&#39;re automatically saving all of your changes in a draft."></div><div class="status-indicator-message" data-tooltip="We&#39;re automatically saving all of your changes in a draft.">Connecting...</div></div></div></div><div class="aui-buttons" id="rte-savebar-tinymce-plugin-point"></div><div class="aui-buttons"><span id="rte-spinner" class="toolbar-item shared-drafts">&nbsp;</span></div><div class="aui-buttons toolbar-group-edit assistive"><button id="rte-button-edit" class="aui-button" title="Return To edit Mode" type="button"><span class="trigger-text">Edit</span></button></div><div class="aui-buttons toolbar-group-preview toolbar-group-preview-page toolbar-group-preview-shared-draft"></div><div class="save-button-container"><button class="aui-button aui-button-primary" type="submit" id="rte-button-publish" name="confirm" value="Save" title="Save"><span class="trigger-text">Save</span></button></div><div class="aui-buttons cancel-button-container-shared-draft"><button class="aui-button" type="submit" id="rte-button-cancel" name="cancel" value="cancel">Close</button></div><div class="aui-buttons toolbar-group-preview toolbar-group-ellipsis"><button class="aui-button toolbar-item aui-dropdown2-trigger aui-dropdown2-trigger-arrowless" aria-haspopup="true" id="rte-button-ellipsis" type="button" resolved="" aria-controls="rte-ellipsis-menu" aria-expanded="false"><span class="aui-icon aui-icon-small aui-iconfont-more"></span></button></div><div id="rte-ellipsis-menu" data-aui-alignment="top auto" class="aui-style-default aui-dropdown2 aui-layer" resolved="" aria-hidden="true"><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" id="rte-button-preview">Preview</a></li><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" id="rte-show-changes">View changes</a></li></ul></div><div class="aui-dropdown2-section"><ul class="aui-list-truncate"><li><a href="https://codesparks.ncs.com.sg/confluence/display/AMSConnect/RabbitMQ+high+availability+and+disaster+recovery#" id="rte-show-revert">Revert to last published version</a></li></ul></div></div></div></div></div></div>

    <section role="dialog" id="quit-editor-dialog" class="aui-layer aui-dialog2 aui-dialog2-medium" aria-hidden="true"><header class="aui-dialog2-header"></header><div class="aui-dialog2-content"></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><button id="qed-publish-button" class="aui-button aui-button-primary update">Update</button><button id="qed-discard-button" title="Discard all unpublished changes" class="aui-button toolbar-item exit">Revert page</button><button id="qed-save-exit-button" class="aui-button aui-button-primary exit">Keep draft</button><button id="qed-close-button" class="aui-button toolbar-item">Close</button></div></footer></section>

    
</div>



<script type="text/x-template" title="dynamic-editor-metadata" id="dynamic-editor-metadata-template">
            <meta name="ajs-use-watch" content="false">
            <meta name="ajs-attachment-source-content-id" content="187236375">
            <meta name="ajs-use-inline-tasks" content="true">
            <meta name="ajs-heartbeat" content="true">
            <meta name="ajs-action-locale" content="en_US">
            <meta name="ajs-editor-plugin-resource-prefix" content="/confluence/s/ab8opv/8401/758836457240a7983be3b3db3463da30107b780e/7.4.1/_">
            <meta name="ajs-edit-mode" content="collaborative">
            <meta name="ajs-user-watching-own-content" content="true">
            <meta name="ajs-new-page" content="false">
            <meta name="ajs-editor-mode" content="richtext">
            <meta name="ajs-auto-start" content="false">
            <meta name="ajs-conf-revision" content="confluence$content$187236375.240">
            <meta name="ajs-sync-revision-source" content="synchrony-ack">
            <meta name="ajs-draft-id" content="187236377">
            <meta name="ajs-draft-share-id" content="f2399eae-b049-41a6-b83a-bc663305e2dd">
            <meta name="ajs-content-type" content="page">
            <meta name="ajs-collaborative-editor-status" content="">
            <meta name="ajs-existing-draft-id" content="0">
            <meta name="ajs-content-id" content="187236375">
            <meta name="ajs-form-name" content="inlinecommentform">
            <meta name="ajs-can-attach-files" content="true">
            <meta name="ajs-show-draft-message" content="false">
            <meta name="ajs-shared-drafts" content="true">
            <meta name="ajs-collaborative-content" content="true">
            <meta name="ajs-min-editor-height" content="150">
            <meta name="ajs-version-comment" content="">
            <meta name="ajs-draft-type" content="page">
                
                <meta name="ajs-synchrony-token" content="eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJodHRwczpcL1wvY29kZXNwYXJrcy5uY3MuY29tLnNnXC9zeW5jaHJvbnlcL3YxIiwic3ViIjoiNDAyODA0YWY0ZmU0ODdjODAxNTAwMzZmZGZlMzAwMGMiLCJhY2Nlc3MiOnsiXC9kYXRhXC9TeW5jaHJvbnktOWNkODRkNmYtZGEwNC0zNzVkLWE4NWQtOGViMTY3ZWJhMjc2XC9jb25mbHVlbmNlLTE4NzIzNjM3NS10aXRsZSI6ImZ1bGwiLCJcL2RhdGFcL1N5bmNocm9ueS05Y2Q4NGQ2Zi1kYTA0LTM3NWQtYTg1ZC04ZWIxNjdlYmEyNzZcL2NvbmZsdWVuY2UtMTg3MjM2Mzc1IjoiZnVsbCJ9LCJyZXZpc2lvbk1ldGEiOnsidXNlcktleSI6IjQwMjgwNGFmNGZlNDg3YzgwMTUwMDM2ZmRmZTMwMDBjIn0sInNlc3Npb24iOnsiYXZhdGFyVVJMIjoiXC9pbWFnZXNcL2ljb25zXC9wcm9maWxlcGljc1wvZGVmYXVsdC5zdmciLCJuYW1lIjoieXVjaGVuc3VuIiwiZnVsbG5hbWUiOiJTdW4gWXUgQ2hlbiAgKE5DUykifSwiaXNzIjoiU3luY2hyb255LTljZDg0ZDZmLWRhMDQtMzc1ZC1hODVkLThlYjE2N2ViYTI3NiIsImV4cCI6MTYyOTc5NTcxOCwiaWF0IjoxNjI5NzA5MzE4fQ.hPJ-BfwZep66W-FTAes1PaVAsJZ5sX2jcFz0wyHrs3o">
    <meta name="ajs-synchrony-base-url" content="https://codesparks.ncs.com.sg/synchrony,https://codesparks.ncs.com.sg/confluence/synchrony-proxy">
    <meta name="ajs-synchrony-app-id" content="Synchrony-9cd84d6f-da04-375d-a85d-8eb167eba276">
    <meta name="ajs-synchrony-expiry" content="1629794818">
    <meta name="ajs-use-xhr-fallback" content="false">

            		    <meta name="ajs-max-thumb-width" content="300">
		    <meta name="ajs-max-thumb-height" content="300">
		    <meta name="ajs-can-send-email" content="true">
		    <meta name="ajs-is-dev-mode" content="false">
		    <meta name="ajs-draft-save-interval" content="30000">
		    <meta name="ajs-show-hidden-user-macros" content="false">
		    <meta name="ajs-can-view-profile" content="true">
		    <meta name="ajs-is-admin" content="false">
		    <meta name="ajs-confluence.prefs.editor.disable.autocomplete" content="false">
		    <meta name="ajs-confluence.prefs.editor.disable.autoformat" content="false">
		    <meta name="ajs-heartbeat-interval" content="30000">
	
    </script>

<script type="text/x-template" title="tableForm" id="table-form-template">
    <form id="tinymce-table-form" class="aui">
        <div class="field-group">
            <label for="rows">Rows</label>
            <input id="rows" name="rows" type="text" size="3" autocomplete="off" value="{0}">
        </div>
        <div class="field-group">
            <label for="cols">Columns</label>
            <input id="cols" name="cols" type="text" size="3" autocomplete="off" value="{1}">
        </div>
        <div class="field-group hidden">
            <input id="width" type="hidden" name="width" value="">
            <label for="width">Width</label>
        </div>
        <div class="group">
            <div class="checkbox">
                <input id="table-heading-checkbox" class="checkbox" type="checkbox" name="heading" checked="checked" value="true">
                <label for="table-heading-checkbox">First row is heading</label>
            </div>
        </div>
        <div class="group hidden">
            <div class="checkbox">
                <input id="table-equal-width-columns-checkbox" class="checkbox" type="checkbox" name="equal-width-columns" value="false">
                <label for="table-equal-width-columns-checkbox">Equal width columns</label>
            </div>
        </div>
    </form>
</script>
<input type="hidden" name="draftId" value="187236377" id="draftId"><input type="hidden" name="originalVersion" value="110" id="originalVersion">
<input type="hidden" name="syncRev" value="0.yfJ80chJMs8zF8F8d_7MnQ.0" id="syncRev">    <input type="hidden" name="atl_token" value="5788c939bf897bbf8a9b8d61ba8b96e7c74ea5c8">
</div><div id="content-hover-0" class="ajs-content-hover aui-box-shadow" style="display: none;"><div class="contents" style="width: 300px;"></div></div></body></html>